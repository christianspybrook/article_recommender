1

Energy Efficient Reconfigurable Intelligent Surface
Enabled Mobile Edge Computing Networks with
NOMA

arXiv:2105.00093v1 [cs.IT] 30 Apr 2021

Zhiyang Li, Student Member, IEEE, Ming Chen, Member, IEEE, Zhaohui Yang, Member, IEEE,
Jingwen Zhao, Student Member, IEEE, Yinlu Wang, Student Member, IEEE, Jianfeng Shi, Member, IEEE,
and Chongwen Huang, Member, IEEE.

Abstract-Reconfigurable intelligent surface (RIS) has
emerged as a promising technology for achieving high spectrum
and energy efficiency in future wireless communication networks.
In this paper, we investigate an RIS-aided single-cell multi-user
mobile edge computing (MEC) system where an RIS is deployed
to support the communication between a base station (BS)
equipped with MEC servers and multiple single-antenna users.
To utilize the scarce frequency resource efficiently, we assume
that users communicate with BS based on a non-orthogonal
multiple access (NOMA) protocol. Each user has a computation
task which can be computed locally or partially/fully offloaded
to the BS. We aim to minimize the sum energy consumption
of all users by jointly optimizing the passive phase shifters,
the size of transmission data, transmission rate, power control,
transmission time and the decoding order. Since the resulting
problem is non-convex, we use the block coordinate descent
method to alternately optimize two separated subproblems.
More specifically, we use the dual method to tackle a subproblem
with given phase shift and obtain the closed-form solution; and
then we utilize penalty method to solve another subproblem
for given power control. Moreover, in order to demonstrate
the effectiveness of our proposed algorithm, we propose
three benchmark schemes: the time-division multiple access
(TDMA)-MEC scheme, the full local computing scheme and
the full offloading scheme. We use an alternating 1-D search
method and the dual method that can solve the TDMA-based
transmission problem well. Numerical results demonstrate that
the proposed scheme can increase the energy efficiency and
achieve significant performance gains over the three benchmark
schemes.
This work was supported in part by the National Natural Science Foundation of China under Grant 61871128, Grant 61960206006, and Grant
61960206005, in part by the open research fund of National Mobile Communications Research Laboratory, Southeast University (No.2021D11), Universities
Natural Science Research Project of Jiangsu Province (20KJB510037). The
work of Prof. Huang was supported by the Fundamental Research Funds for
the Central Universities. (Corresponding authors: Zhiyang Li, Zhaohui Yang.)
Zhiyang Li, Ming Chen, Jingwen Zhao and Yinlu Wang are with National Mobile Communications Research Laboratory, Southeast University,
Nanjing 211111, China. emails: {lizhiyang, chenming, zhaojingwen, yinluwang}@seu.edu.cn.
Zhaohui Yang is with Centre for Telecommunications Research, Department
of Informatics Engineering, King's College London, London WC2B 4BG, UK.
email: yang.zhaohui@kcl.ac.uk.
J. Shi is with the School of Electronic and Information Engineering, Nanjing University of Information Science and Technology, Nanjing,
210044, China; and also with the National Mobile Communications Research Laboratory, Southeast University, Nanjing, 210096, China. email:
jianfeng.shi@nuist.edu.cn.
C. Huang is with College of Information Science and Electronic Engineering, Zhejiang University, Hangzhou 310027, China, and with International
Joint Innovation Center, Zhejiang University, Haining 314400, China, and also
with Zhejiang Provincial Key Laboratory of Info. Proc., Commun. & Netw.
(IPCAN), Hangzhou 310027, China. email: chongwenhuang@zju.edu.cn.

Index Terms-Reconfigurable intelligent surface (RIS), mobileedge computing (MEC), non-orthogonal multiple access (NOMA).

I. I NTRODUCTION
A. Related Works

I

N the forthcoming sixth-generation (6G) networks, mobile
data will experience a phenomenal growth, most of which
are generated by edge devices in real-time, such as mobile
phones, computers and sensors. Since most of the users
are sensors with limited computing capabilities, mobile edge
computing (MEC) as a promising technology can efficiently
guarantee the computing resource, reduce the capital cost and
provide flexibility. In the MEC framework, wireless devices
offload their computation intensive or delay-sensitive tasks to
nearby base stations (BSs) or servers at the edge of radio
access networks to save the battery power and computation
resources [1]–[3]. Driven by the benefits of MEC networks,
there were a large number of contributions studying MECbased systems and numerous efficient algorithms were proposed to solve joint communication and computation resource
allocation problems [4], [5].
Meanwhile, reconfigurable intelligent surface (RIS) can be
used as a passive reflector which does not need radio frequency
(RF) module to forward signals [6]–[8]. The RIS could change
the channel condition for the MEC service and significantly
increase spectrum spatial efficiency. The RIS consists of many
low-cost and re-configurable printed dipoles, and the smart
controller can change the specific angles of these passive
elements according to the requirements of systems [9], [10].
By optimizing the phase shifts of RIS, one can both suppress
the interference and boost the desired signal, which enhances
transmission security and efficiency [11]–[13]. [14] introduced
the structure of RIS that it is a massive low-cost reflecting elements mounted surface, and how the RIS achieved 3-D passive
beamforming via the amplitude and phase shift optimization.
The authors in [15] introduced the fundamental capacity limit
characterization of RIS-aided multiple-input multiple-output
(MIMO) communication networks by jointly optimizing the
transmit covariance matrix and RIS reflection coefficients. In
[16], the RIS was shown to extend the operational range of the
wireless powered sensors in simultaneous wireless information
and power transfer (SWIPT) networks. The RIS was shown to

2

significantly enhance the data rate of the cell-edge users in [17]
for the multicell networks. By utilizing the benefits of RIS,
including improving channel conditions, enhancing reflectionaided beamforming gain and energy transmission, the potential
of MEC systems can be significantly improved. For example,
[18] investigated RIS-based MEC systems, where users could
choose to offload partial of their tasks to the MEC with the
help of RIS. Numerical results showed that the overall system
latency decreases significantly compared with the system without RIS. In [19], the authors considered a wireless powered
MEC network and an RIS was used to aid wireless energy
transfer and computation offloading. However, in [18] and
[19], the authors only studied the performance improvement
when integrating RIS into MEC networks, without studying
the performance under various multiple access schemes.
On the other hand, non-orthogonal multiple access (NOMA)
is recognized as an essential radio access technology in the
fifth generation (5G) and beyond 5G [20]. For traditional
orthogonal multiple access (OMA) techniques, such as time
division multiple access (TDMA) and orthogonal frequency
division multiple access (OFDMA), each resource block is
occupied by only one user. With NOMA, users can reuse
the same frequency resource to save the energy and spectrum
resources. Since NOMA technique can significantly enhance
the system spectrum efficiency, it has been extensively studied
in MEC-based systems. In [21], the authors considered a
NOMA-assisted MEC system and obtained closed-form expressions, where the energy consumption and the time interval
were jointly optimized. [22] studied a multiuser MEC system
where users offload their computation tasks through NOMA
technique and the BS decoded all offloaded tasks by successive
interference cancellation (SIC), in which the NOMA decoding order was optimized. [23] proposed a hybrid offloading
scheme where the users were divided into two groups and
their locations followed a homogeneous Poisson Point Process.
They also investigated distance-dependent NOMA grouping
schemes in MEC networks and used numerical results to
show the advantages and disadvantages of each scheme. The
advantages of NOMA technology and its wide applications
inspire the idea of using NOMA as a means of transmission
in our model.
When the channel gain differences of users are large or the
frequency resource is limited, the advantages of NOMA are
more obvious, and RIS can be deployed to help achieve this
goal by carefully designing its phase shifts. A design of the
RIS-assisted NOMA downlink transmission with the impact
of hardware impairments was proposed in [24]. Moreover, in
[25], the authors considered an RIS assisted NOMA network
where a robust beamforming scheme was proposed in an
eavesdropping scenario with imperfect channel state information (CSI) for the eavesdropper. Furthermore, multi-cluster
multiple-input-single-output (MISO) NOMA communication
networks were discussed in [26], and RISs were utilized to
assist the communication. However, the above works [24]–
[26] did not consider RIS-aided NOMA communication for
the MEC networks.

B. Motivations and Contributions
The above-mentioned works [14]-[22] mainly studied the
NOMA-MEC networks or the RIS assisted MEC networks.
Since RIS can significantly enhance the system performance
by reconfiguring the channel conditions and NOMA can be
used to serve multiple users simultaneously at the same
resource block [24]–[26], we consider to utilize RIS in the
NOMA-MEC networks to further improve the energy efficiency. In this paper, we focus on an RIS-aided NOMA-MEC
network where the direct links between users and the BS
are in poor conditions and the RIS is used to guarantee the
quality of service (QoS) requirements of MEC services. Our
contributions can be summarized as follows:
• We propose an RIS-aided multi-user MEC MISO system,
where a multi-antenna BS (also acts as an MEC server)
serves multiple single-antenna users using NOMA. To
minimize the sum energy consumption of all users, we
jointly optimize the passive reflecting beamforming (i.e.,
phase shifts of RIS), the number of transmission data,
transmission rate, power control, transmission time as
well as the decoding order.
• To tackle the formulated non-convex problem, we propose a low-complexity algorithm by solving two subproblems iteratively. In particular, for the first subproblem
with given phase shifts, we apply the dual decomposition
method to obtain the optimal closed-form solution as
well as the optimal decoding order. Then for the second
subproblem with given power control, we utilize the
penalty method to transform this subproblem into a series
of convex problems and obtain a suboptimal solution.
• To demonstrate the effectiveness of our proposed scheme,
we provide a TDMA-based transmission model as a
benchmark. To solve the energy efficient resource allocation for TDMA case, we propose the dual decomposition
method with 1-D search.
• Simulation results show that our proposed RIS-MEC with
NOMA scheme can dramatically decrease the sum energy
consumption at users compared with three conventional
benchmark schemes. In addition, we discuss the impact
of distances on the performance of our proposed system.
C. Organization and Notation
The rest of this paper is organized as follows. In Section
II, we introduce the system model and problem formulation
of the RIS-aided NOMA-based MEC network. In Section III,
we introduce an efficient block coordinate descent algorithm
for solving the proposed problem. In Section IV, we propose
a TDMA-based partial offloading scheme as a benchmark and
solve the TDMA-based transmission problem. In Section V,
we show the numerical results and evaluate the performance
of our proposed schemes. Finally, we give the conclusions in
Section VI.
Notations: Scalars, vectors and matrices are denoted by
italic letters, bold lower and upper case letters, respectively.
Rx×y and Cx×y denote the space of x × y real-valued and
complex-valued matrices, respectively. Cx denotes the sets of
all complex-valued x × 1 vector. Re(x) denotes the real part

3

xk denotes the Euclidean norm of
of a complex number x. kx
x) denotes the diagonal
the complex-valued vector x and diag(x
matrix and the diagonal elements corresponding to the elements in vector x . The distribution of a circularly symmetric
complex Gaussian (CSCG) random vector with mean vector
μ , σ 2 ),
μ and covariance matrix σ 2 is denoted by n ∼ CN (μ
where '∼' means 'distributed as'.

which can be equivalent to
Rk Ck − Fk T
, ∀k ∈ K.
(3)
Ck
Defining fk as the required CPU frequency for computing each
CPU cycle at user k, it needs to satisfy
dk ≥

CkLoc
.
T
The local energy consumption can be expressed as [22]
fk =

IRS

EkLoc = αfk2 CkLoc ,

NOMA
Direct link ( poor condition )

(Rk − dk )3 Ck3
.
(6)
T2
It is also assumed that the edge cloud has finite computation
capacity F . As a result, the offloading data of all users should
satisfy the following computation constraint:
EkLoc = α

User 1

User 2

User 3

User 4

K
X

Fig. 1. RIS-based MEC uplink system model.

k=1

A. System Model
As shown in Fig.1, we consider an RIS-enhanced uplink
system with one BS, K users and one RIS, which helps the
communication between the BS and users. The number of
transmit antennas at the BS and that of reflecting elements
at the RIS are respectively denoted by M and N . Let K =
{1, 2, * * * , K} denote the set of all users. The BS schedules the
users to completely or partially offload tasks. The users with
partial or complete offloading respectively offload a fraction
of or all input data to the BS, while the users with partial or no
offloading respectively compute a fraction of or all input data
using local central processing unit (CPU). Due to the small
latency of cloud computing and small sizes of computation
results, the time of cloud computing and downloading from
the BS is negligible compared to the time of mobile offloading
and local computing.
B. Task Computing Model
The local computing model is described as follows. Since
only dk bits are offloaded to the BS, the remaining Rk − dk
bits are needed to be computed locally at user k. The total
CPU cycles for local computation at user k is given by
∀k ∈ K,

(1)

where Ck is the number of CPU cycles required for computing
1-bit input data at user k.
Let Fk denote the maximum computation capacity of user k,
which is measured by the number of CPU cycles per second.
Denoting T as the maximal latency of all users, we can obtain
the following local computation latency constraints
(Rk − dk )Ck ≤ Fk T,

∀k ∈ K,

dk Ck ≤ F.

(7)

C. Offloading Model

II. S YSTEM M ODEL AND P ROBLEM F ORMULATION

CkLoc = (Rk − dk )Ck ,

(5)

where α represents the effective capacitance coefficient which
is determined by the chip architecture. By substituting (1) and
(4) into (5), we have

NOMA

BS (integrated with MEC
servers)

(4)

(2)

Denote the bandwidth of the network by B, the power of
the additive white Gaussian noise by σ 2 and the maximum
transmit power of user k by Pk . Denote the transmit signal
√
of user k by pk sk , where pk is the transmit power, which
satisfies
0 ≤ pk ≤ Pk ,

(8)

and sk is the signal with zero mean and unit variance. With
the help of RIS, the received signal at the BS is
y=

K
X

k=1

√
H
p k sk + n H
hH
k ,
D,k + h k ΘG

(9)

M
where h H
denotes the direct link channel response
D,k ∈ C
from user k to the BS, G ∈ CN ×M and hk ∈ CN
respectively denote the channel responses from BS to RIS
and from RIS to user k, the phase shift matrix of the RIS
is Θ = diag(eiθ1 , * * * , eiθN ) ∈ CN ×N with θn ∈ [0, 2π],
n ∈ N = {1, * * * , N }, and n k ∈ CM denotes the additive
white Gaussian noise at the BS with n k ∼ CN (00, σ 2 I).
By allowing the BS to properly design the decoding order of
NOMA and employing time-sharing among different decoding
orders, the capacity region for the K users is achievable and
it corresponds to the following polymatroid [27]

X
C(pp, θ ) = r ∈ RN :
rk
(10)
k∈K′

≤B log2

X hH
hH
D,k +h
k ΘG
pk
1+
2
σ
′
k∈K

!


, ∀K′ ⊆ K \ ∅ ,

where rk denotes the achievable rate of user k, r =
[r1 , * * * , rK ], θ = [θ1 , * * * , θN ], ∅ is an empty set, and
K′ ⊆ K \ ∅ means that K′ is a non-empty subset of K.

4

Denoting the uplink transmission time by t, the energy
consumption for offloading at user k is given by
EkOff

= tpk ,

∀k ∈ K.

(11)

A. Solve Problem (13) for given θ
Firstly, for given θ , the optimization problem (13) can be
reformulated as

To satisfy that dk bits can be offloaded to the BS, we have
trk ≥ dk ,

∀k ∈ K.


K 
X
(Rk − dk )3 Ck3
α
+
tp
k
T2

min

(12)

p ,r
r
d ,t,p

k=1
K
X

s.t.

D. Problem Formulation

k=1

In light of some effectively channel estimation methods for
RIS-aided wireless networks were proposed in existing works
[28]–[32]. Then, in this paper, we have the assumption that
the CSI is perfectly obtained at the transmitter side.
Based on the above model, the sum user energy minimization problem is formulated as:
min

p,r
r ,θ
θ
d ,t,p

s.t.

K
X

3

(α

k=1
K
X

(Rk − dk )
T2

Ck3

+ tpk )

(13a)

dk Ck ≤ F,

(13b)

trk ≥ dk , ∀k ∈ K,
r ∈ C(pp, θ ),

(13c)
(13d)

Dk ≤ dk ≤ Rk , ∀k ∈ K,
0 ≤ pk ≤ Pk , ∀k ∈ K,

(13f)
(13g)

k=1

0 ≤ t ≤ T,

III. A N E FFICIENT

ALGORITHM TO

S OLVE P ROBLEM (13)

Obviously, Problem (13) is nonconvex due to the nonconvex
constraints (13c) and (13d). In order to solve Problem (13), we
propose an efficient iterative algorithm based on the alternating
method. In particular, for given phase shift vector θ , we use the
dual method to tackle this subproblem and obtain the optimal
offloading bits d ∗ , transmission time t∗ , power allocation
p ∗ and use a time sharing technique to obtain the optimal
decoding order and transmission rate r ∗ . Then for given p , we
use the penalty method to optimize d , t, r and θ . The suboptimal solution to Problem (13) is obtained via iteratively
solving the aforementioned two subproblems.
In the following, we show how to solve one subproblem
of Problem (13) with given θ and use the penalty method to
solve another subproblem with given p .

dk Ck ≤ F,

trk ≥ dk ,
r ∈ C(pp),

(14b)

∀k ∈ K,

0 ≤ t ≤ T,
Dk ≤ dk ≤ Rk ,
0 ≤ pk ≤ Pk ,

(14c)
(14d)
(14e)
(14f)

∀k ∈ K,

∀k ∈ K.

(14g)

Theorem 1: When t > 0, the optimal transmission time t
of Problem (14) is t = T .1
Proof: For given d , Problem (14) can be written as
min t
p ,r
r
t,p

s.t.

(13e)

wheren d = [d1 , * *o* , dK ], p = [p1 , * * * , pK ] and Dk =
k −Fk T
, 0 is obtained from equation (3). The obmax Rk CC
k
jective function (13a) represents the total energy consumption
of all users including both offloading energy and computing
energy. Constraint (13b) shows the maximum computation
ability at the BS, while each user can successfully transmit
the task bits as shown in (13c). The rate region of NOMA
is expressed in constraint (13d). Constraint (13e) ensures that
the offloading can be completed in time requirement of T for
all users. Constraint (13f) shows the minimum and maximum
requirements of the offloaded bits of each user. The maximum
power constraint is given in (13g).

(14a)

K
X

pk

(15a)

k=1

trk ≥ dk ,
r ∈ C(pp),

∀k ∈ K,

0 ≤ t ≤ T,

0 ≤ pk ≤ Pk ,

(15b)
(15c)
(15d)

∀k ∈ K.

(15e)

Assume that (t∗ , p∗k ) is the optimal solution of Problem (15)
with 0 < t∗ < T . In order to minimize the objective function
of Problem (15), we have
dk
.
t∗
Thus constraint (15c) can be rewritten as

X
C(pp, θ ) = r ∈ RN :
dk
rk∗ =

(15f)

(15g)

k∈K′

∗




≤t B log2 1 +

X

H
hH
D,k + h k ΘG

σ2

k∈K′

2




p∗k  , ∀K′


⊆K\∅ .

Define s = T /t∗ , thus s > 1. According to the monotonicity
of (15g), we have


2
H
H
h
+
h
Θ
G
X
X
D,k
k


p∗k  (16)
dk ≤ t∗ B log2 1 +
2
σ
′
′
k∈K

k∈K



1X

< st∗ B log2 1 +
s
′
k∈K

H
hH
D,k + h k ΘG

σ2

2




p∗k  ,

where the last inequality in (16) follows from the fact that
function x log2 (1 + 1/x) is monotonically increasing when
1 Compared to [33], the optimization problem is formulated in a different
manner and the method in the proof is different.

5

x > 0, and we can find a coefficient s′ (0 < s′ < 1) that
satisfies the following condition


2
H
H
h
+
h
Θ
G
X
X
D,k
k


dk ≤ t∗ B log2 1 +
p∗k 
2
σ
′
′
k∈K

1) Evaluating g(λ, μ ) by solving Problem (20): First, for
given λ, μ , we obtain the dual function g(λ, μ ) by solving
Problem (20). The Lagrangian in (19) can be rewritten as
follows

k∈K

(17)



1X

= st B log2 1 +
s
′
∗

H
hH
D,k + h k ΘG

2

σ2

k∈K




s′ p∗k  .

L(dd , t, p , r , λ, μ ) =

+

According to the objective function of (15), we have
K
X

k=1

K

k=1

K

X
X
t∗ p∗k
1
s′ T ×
<
t∗ p∗k ,
st∗ × s′ p∗k =
s
T
k=1
∗

(18)

k=1

which means when 0 < t < T , we can always
construct
t∗ p∗
a new set of solution t′ = T and p′k = s′ T k that makes
the objective function of Problem (15) smaller than when the
solutions are t∗ and p∗k . Therefore, when t > 0, the optimal
solution of t is t = T .
It is found that all constraints in Problem (14) are convex
except (14c). Constraint (14c) is neither convex nor concave
because its Hessian is indefinite which has a positive and a
negative eigenvalue. However, function (14c) is quasiconcave
for all t ≥ 0, dk ≥ 0, since the suplevel sets {t, rk ∈ R + |trk ≥
dk } are convex sets for all dk [34].
Therefore, Problem (14) is convex and satisfies the Slater's
condition, based on which the strong duality between Problem
(14) and its dual problem holds. The partial Lagrangian
function of Problem (14) is
L(dd, t, p , r , λ, μ ) =

K
X

k=1

(α

(Rk − dk )3 Ck3
+ tpk )
T2

(19)

K
K
X
X
+ λ(
dk Ck − F ) +
μk (dk − trk ),
k=1

k=1

where λ and μk are the Lagrange dual variables. The Lagrange
dual function is given by
g(λ, μ ) = min L(dd , t, p, r , λ, μ)

(20a)

p ,r
r
d ,t,p

(20b)

0 ≤ pk ≤ Pk ,

∀k ∈ K,

∀k ∈ K.

(20c)
(20d)
(20e)

Accordingly, the Lagrange dual problem can be expressed as
max
μ
λ,μ

g(λ, μ )

s.t. μk ≥ 0,
λ ≥ 0.

3

(λdk Ck + α

k=1

(Rk − dk ) Ck3
+ μk dk )
T2
(22)

(tpk − μk trk ) − λF.

Note that the objective function as well as all the constraints
of Problem (20) is decoupled for d and other variables.
Then, Problem (20) can be decomposed into 2K subproblems
through dropping the constant term λF as follows,

min
d

K
X

(λdk Ck +

k=1

α (Rk − dk )3 Ck3
+ μk dk )
T2

s.t. Dk ≤ dk ≤ Rk .

(23a)
(23b)

and
min
p ,t
r ,p

K
X

k=1

(tpk − μk trk )

s.t. r ∈ C(pp),
0 ≤ t ≤ T,

0 ≤ pk ≤ Pk ,

(24a)
(24b)
(24c)

∀k ∈ K.

(24d)

It is obvious to find that Problem (23) is a convex problem
for dk , and the Slater conditions hold. The following theorem
gives the optimal solution of Problem (23).
Theorem 2: The optimal solution of Problem (23) is
r
λCk + μk T
∗
dk = max{Rk −
, Dk }, ∀k ∈ K.
(25)
3αCk Ck
Proof: Since each user k is independent of each other, the
Lagrangian function corresponding to user k is
3

s.t. r ∈ C(pp),

0 ≤ t ≤ T,
Dk ≤ dk ≤ Rk ,

K
X

K
X

α (Rk − dk ) Ck3
+ μk dk − β̄k (dk − Dk )
T2
(26)
−β k (Rk − dk ),

Lk =λdk Ck +

where β̄k , β k are the Lagrangian dual multipliers associated
with constraint (19b). The Karush-Kuhn-Tucke (KKT) conditions of Problem (23) are as follows

(21a)
∀k ∈ K,

(21b)
(21c)

To tackle Problem (14), we solve Problem (20) to obtain
g(λ, μ ) with given λ, μ and then solve Problem (21) to
update the Lagrange variables λ and μ . The optimal solutions
d ∗ , t∗ , p ∗ , r ∗ can be obtained by iteratively solving these
two problems.

3α (Rk − dk )2 Ck3
∂Lk
= λCk + μk −
− β̄k + β k = 0,
∂dk
T2
(27a)
β̄k∗ (d∗k − Dk ) = 0,
(27b)

β ∗k (Rk − d∗k ) = 0,
Dk ≤
β̄k∗

≥

d∗k

≤ Rk ,

0, β ∗k

≥ 0.

(27c)

(27d)
(27e)

6

Substituting (27d) and (27e) into (27b) and (27c), we have
β̄k∗ = β ∗k = 0 when Dk < d∗k < Rk . Solving conditions (27a),
we can obtain the optimal d∗k , which is given by
! Rk
r
λCk + μk T
∗
dk = Rk −
,
(28)
3αCk Ck
Dk

a

where x|b = min{max{x, b}, a}. Since
r
λCk + μk T
Rk −
≤ Rk ,
(29)
3αCk Ck
we have
r
λCk + μk T
∗
, Dk }.
(30)
dk = max{Rk −
3αCk Ck
Thus, Theorem 2 is proved.
The objective
function of Problem (24) is a linear function
PK
of t. If k=1 (pk − μk rk ) > 0, then the optimal transmission
time is t∗ = 0, which means that all tasks
to be computed
Pneed
K
locally, and we can set p∗k = rk∗ = 0. If k=1 (pk −μk rk ) ≤ 0,
then the optimal transmission time is t∗ = T and in this case
Problem (24) can be transformed into
min T
p
r ,p

K
X

k=1

(pk − μk rk )

(31a)

s.t. r ∈ C(pp),
0 ≤ pk ≤ Pk , ∀k ∈ K.

(31b)
(31c)

To solve Problem (31), we first consider the following subproblem with given p
K
X

max

(32a)

s.t. r ∈ C(pp),

(32b)

k=1

According to Theorem 3, the optimal decoding order is
determined by the order of the Lagrange multipliers. It has
been proven in [35, Lemma 3.2] that the complexity of solving
problem (32) is O(K log2 (K)). Using (33), Problem (31) can
be rewritten as
K
X

min T
pk − μπ(k) − μπ(k+1)
(34a)
k=1

×B log2

1+

k
X

hH
D,π(i)

i=1

s.t. 0 ≤ pk ≤ Pk , ∀k ∈ K.

+ hH
π(i)ΘG

2

pπ(i)

!!

(34b)

YL

l=1

χl |}.
|χ

(35)

Assuming rkφ is the achievable rate in time slot φ, and each
length of time slots is obtained by solving the following
problem
Find τ 1 , . . . , τ |Ψ|

(36a)

|Ψ|

X

φ=1
|Ψ|
X

φ=1

whose optimal solution can be obtained via the following
theorem as shown in [35].
Theorem 3: The optimal rate
h vector of Problem i(32)
∗
∗
∗
of
, . . . , rπ(K)
is given by one vertex r ∗π = rπ(1)
, rπ(2)
∗
polymatroid C(pp, θ ), where r π represents the optimal rate
vector under the optimal decoding order π = [π(1), . . . , π(K)]
∗
is the
determined by μπ(1) ≥ * * * ≥ μπ(K) ≥ 0, and rπ(k)
achievable rate of user π(k) given by [27]
!
Pk
2
H
hH
1 + i=1 kh
D,π(i) + h π(i)ΘG k pπ(i)
∗
.
rπ(k) = B log2
Pk−1 H
2
hD,π(i) + h H
1 + i=1
kh
π(i)ΘG k pπ(i)
(33)

p

Ψ = {1, ...,

s.t.
μk rk

r

For the convenience of notation, we set μπ(K+1) = 0. Note
that Problem (34) is convex with respect to p , and it can be
easily solved by the standard toolbox, such as CVX [36]. Let
p ∗ denote the optimal solution to Problem (34) and the optimal
r ∗ can be obtained by substituting p∗ into equation (33).
2) Using time sharing method to obtain primal optimal r ∗
and decoding order for Problem (14): It is worth mentioning
that the decoding order in Problem (14) is determined by
μ . However, if there exists k and k ′ such that μk = μ′k ,
the decoding order as well as the transmission rate r ∗ is
not unique. In this case, the primal optimal solution can be
obtained by time-sharing method.
More specifically, define χ 1 , * * * , χ L as L disjoint subsets
χl | as the
in which μk = μ′k (∀k, k ′ ∈ χ l ) are equal. Define |χ
χl | ≥ 2, ∀l = 1, . . . , L.
cardinality of the set χ l , and there are |χ
To find the optimal decoding order by time-sharing, we can
divide the transmission time t into |Ψ| time slots, where Ψ
can be expressed as

τ φ rkφ ≥ dk ,

∀k ∈ K,

(36b)

τ φ ≤ t∗ ,

0 ≤ τ φ ≤ t∗ ,

(36c)
∀k ∈ K.

(36d)

Problem (36) is a linear problem and can be easily solved by
CVX.
3) Obtaining the optimal λ∗ , μ ∗ by solving Problem (21):
λ, μ ) is obtained, λ∗ , μ ∗ can be obtained by solving
Since g(λ
λ, μ ) is convex with respect to λ, μ ,
Problem (21). Although g(λ
yet may not be differentiable in general. Therefore, λ∗ , μ ∗ can
be updated as follows
"

λ(x + 1) = λ(x) + δ1 (x)F −

K
X

k=1

d∗k Ck

#+

,

+

μk (x + 1) = [μk (x) + δ2 (x)t∗ rk∗ − d∗k ] ,

(37)

(38)

where [a]+ represents the function max{a, 0}, x is the iteration number, and δ1 (x), δ2 (x) are the dynamically chosen step
size sequences which are based on suitable estimates.
B. Solve Problem (13) for given p
For given p , Problem (13) can be rewritten as follows,

7

Then, Problem (40) can be reformulated as

min

r ,θ
θ
d ,t,r

s.t.

K
X

3

(α

k=1
K
X

k=1

(Rk − dk )
T2

Ck3

+ tpk )

dk Ck ≤ F,

trk ≥ dk ,
r ∈ C(θθ ),

(39b)

∀k ∈ K,

0 ≤ t ≤ T,

Dk ≤ dk ≤ Rk ,

(39a)

∀k ∈ K.

r ,θ
θ
d ,r

s.t.

K
X
(Rk − dk )3 Ck3
α
T2
k=1
K
X

k=1

dk Ck ≤ F,

dk ≤ T rk ,
r ∈ C(θθ ),

Dk ≤ dk ≤ Rk ,

∀k ∈ K.

2

(40a)

Constraint (42) is non-convex with respect to η and u , and
we use the successive convex approximation (SCA) method
to approximate it by a convex constraint. Let u (r) denote the
vector u in the r-th iteration of the SCA method. Constraint
(42) can be approximated by
(43)

k∈K

k∈K

|un | = 1,

(44e)
(44f)

∀n ∈ N ,

∀k ∈ K.

(43),

(44g)

Noting that (44f) is still a nonconvex constraint, we consider to
utilize the penalty method and Problem (44) can be formulated
as
K
X
X

(Rk − dk )3 Ck3
α
+Q
1 − |un |2
2
T

min

k=1
K
X

s.t.

(45a)

n∈N

dk Ck ≤ F,

(45b)

Dk ≤ dk ≤ Rk , ∀k ∈ K,
dk ≤ T rk , ∀k ∈ K,

(40d)
(40e)

H
H
H
H
H
ηk ≤ h H
D,kh D,k + u V kh D,k + h D,kV k u + u V k V k u .
(42)

(44b)

Dk ≤ dk ≤ Rk , ∀k ∈ K,
(44c)
dk ≤ T rk , ∀k ∈ K,
(44d)
!
X ηk
X
pk , ∀K′ ⊆ K \ ∅,
rk ≤ B log2 1 +
σ2
′
′

(40c)

(41)

(44a)

dk Ck ≤ F,

k=1

hH
G ∈ CN ×M . We introduce a slack
where V k = diag(h
k )G
vector η = [η1 , η2 , . . . , ηK ], which satisfies

H
H
H
+ hH
D,kh D,k + u V kh D,k + h D,kV k u .

k=1

r ,u
u ,η
η
d ,r

H H
H
H
= hH
D,kh D,k + h k ΘGh D,k + h D,kG Θ h k
H H
+ hH
k ΘGG Θ h k
H
H
H
H
H
= hH
D,kh D,k + u V kh D,k + h D,kV k u + u V k V k u ,




(r)
ηk ≤2Re u (r)H V k u − u (r) + u (r)H V kV H
k u

s.t.

(39f)

It is not difficult to find that all constraints in Problem (40)
are convex except (40d). Define u = [u1 , * * * , uN ]H , where
un = eiθn , n = 1, . . . , N and we have
H
hH
D,k + h k ΘG

k=1
K
X

(39d)
(39e)

(40b)

∀k ∈ K,

min

r ,u
u ,η
η
d ,r

(39c)

According to Theorem 1, we have t∗ = 0 or t∗ = T . When
t∗ = 0, which means that all tasks should be computed locally
and the optimal solution can be d ∗ = 0 , r ∗ = 0 , θ ∗ = 0 . When
t∗ = T , Problem (39) can be rewritten as

min

K
X
(Rk − dk )3 Ck3
α
T2

(44e),
|un | ≤ 1,
(43),

∀n ∈ N ,

∀k ∈ K,

(45c)
(45d)
(45e)
(45f)
(45g)

where
P Q is a large positive coefficient. Obviously,
Q n∈N 1 − |un |2 enforces that when 1 − |un |2 = 0, ∀n ∈
N , u obtains the optimal solution. To handle the nonconvexity
of Problem (45), SCA is utilized to approximate the objective
function as
K
X
X

(Rk − dk )3 Ck3
+
Q
1 − |urn |2
(46)
α
T2
n∈N
k=1
X
− 2Q
R (urn (un − urn )) ,
n∈N

(r)

where un denotes un in the r-th iteration of the SCA method.
Based on the aforementioned
approximations,
by dropping

P
the constant term Q n∈N 1 − |urn |2 , Problem (39) can be
rewritten as
min

r ,u
u ,η
η
t,r

K
X
X
(Rk − dk )3 Ck3
α
− 2Q
R (urn (un − urn ))
2
T
k=1

n∈N

(47a)

s.t.

dk ≤ T rk , ∀k ∈ K,
0 ≤ t ≤ T,
|un | ≤ 1,
(44e),
(43),

∀n ∈ N ,

∀k ∈ K.

(47b)
(47c)
(47d)
(47e)
(47f)

8

Since Problem (47) is a convex problem, we can utilize the
interior point method or CVX [36] to obtain the optimal
solution of Problem (47). Moreover, the solution of θ can be
updated based on u .
C. Iterative Algorithm for solving Problem (13)
The alternating procedure for solving Problem (13) is given
in Algorithm 1. We utilize a block coordinate descent method
to alternately solve Problem (14) and Problem (39), and
finally obtain the suboptimal solution. Since the objective
value decreases with the iteration number and has a finite lower
bound, the algorithm is guaranteed to converge.
The procedure for solving Problem (14) is shown as Algorithm 2. The dual method is introduced to find the optimal
closed-form solutions of Problem (14) as well as the optimal
decoding order. To solve Problem (39), the penalty method is
utilized to approximately transform this problem to Problem
(47) and the procedure of solving Problem (47) is shown in
Algorithm 3.
Algorithm 1 :Block Coordinate Descent Algorithm for Problem (13)
1: Initialize d(0) , t(0) , p (0) , r (0) , θ (0) , the tolerance τ ,
iteration variable a = 0.
2: repeat
3:
With θ (a) , update d (a) , t(a) , r (a) , r (a) by solving
Problem (14).
4:
With p (a) , update d (a) , t(a) , r (a) , θ (a) by solving
Problem (39).
5:
Set a = a + 1.
6: until the objective value of Problem (13) converges.

Algorithm 2 :Alternating Procedure for Solving Problem (14)
1:
2:
3:
4:
5:
6:
7:
8:
9:
10:

θ (a)

Initialize θ , the tolerance τ , iteration variable i = 0.
repeat
Update Lagrange variables λ, μ using Eq. (37) and Eq.
(38).
Set the permutation π , s.t. μπ(1) ≥ * * * ≥ μπ(K) ≥ 0.
Update p by solving Problem (34).
Update r by using Eq. (33).
Update d and t by solving Problem (23) and (24).
Calculate the objective function of Problem (13) and
the value is denoted by L(i), i = i + 1.
until L(i) − L(i − 1) < τ .
Output
Output: d (a) , t(a) , p (a) , and Lagrange variables λ(a) , μ (a) .
By solving Problem (36), the optimal r (a) and decoding
order can be obtained.

IV. TDMA S CHEME

In this section, we consider an RIS-based TDMA-MEC
model to serve as a benchmark for the aforementioned RISbased NOMA-MEC transmission model. In the TDMA protocol, the time sharing factor of each user is 1/K, and the rate
of the k-th user is

rk =



B

log2 1 +
K

2:
3:
4:

Initialize p (a) .
Use the interior point method to update d (a) ,
t(a) , r (a) , u (a) by solving Problem (47).
Update θ (a) based on u (a) .
Output
Output: d (a) , t(a) , r (a) , θ (a) .

H
hH
D,k + h k ΘG

σ2

2




pk  , ∀k ∈ K. (48)

Similar to the NOMA-based model in Section II, we provide
the following energy minimization problem for RIS-assisted
TDMA-MEC system model

min

p ,r
r ,θ
θ
d ,t,p

s.t.

K
X

k=1
K
X

k=1

(α

(Rk − dk )3 Ck3
+ tpk )
T2

(49a)

dk Ck ≤ F,

trk ≥ dk ,

(49b)

∀k ∈ K,


H
hH
D,k + h k ΘG
B

rk ≤
log2 1 +
K
σ2

(49c)
2




pk  , ∀k ∈ K,

t ≤ T,

0 ≤ pk ≤ Pk , ∀k ∈ K,
Dk ≤ dk ≤ Rk , ∀k ∈ K.

(49d)
(49e)

(49f)
(49g)

We use (49d) to replace (48) because if (49d) holds with
inequality, we can always find a smaller pk until the optimal
solution is obtained. Thus (49d) is equivalent to (48) in Problem (49). It is noted that Problem (49) is a simplified version
of Problem (13). It is because without NOMA technique,
the number and complexity of TDMA rate constraints are
dramatically reduced. For solving Problem (49), we firstly
solve this problem for given θ and then use alternating 1D search method to obtain the sub-optimal θ . Then alternate
the two processes until the suboptimal solution is obtained.

A. Solving Problem (49) for Given θ
It is not difficult to find that for given θ , Problem (49) can
be written as follows

Algorithm 3 :Algorithm for Solving Problem (47)
1:

FOR COMPARISON

min

p ,r
r
d ,t,p

s.t.

K
X

k=1

(α

(Rk − dk )3 Ck3
+ tpk )
T2

(49b) − (49g).

(50a)
(50b)

Problem (50) is a convex problem because constraint (49c)
is quasi-concave and other constraints are convex. The partial

9

Lagrangian of Problem (50) is
LT DMA (dd, t, p , r , υ, ξ , η ) =

and

K
X

k=1

(Rk − dk )3 Ck3
(α
+ tpk )
T2

min
p,t
r ,p

K
X

t

k=1

(51)
−

K
K
X
X
+ υ(
dk Ck − F ) +
ξk (dk − trk )
k=1

+

K
X

k=1

k=1





H
hH
D,k + h k ΘG

B


log2 1 +
ηk rk −
K

2

σ2

Correspondingly, the Lagrange dual function is


pk  .

gT DMA (υ, ξ , η ) = min LT DMA (dd, t, p , r , λ, μ )
p,r
r
d ,t,p

s.t. t ≤ T,



(52a)
(52b)

Dk ≤ dk ≤ Rk , ∀k ∈ K,
0 ≤ pk ≤ Pk , ∀k ∈ K,

(52c)
(52d)

where υ, ξk , ηk are the Lagrange dual variables. The Lagrange dual problem is
max gT DMA (υ, ξ , η )

(53a)

ξ ,η
η
υ,ξ

s.t. υ ≥ 0,
ξk ≥ 0,

(53b)
(53c)

∀k ∈ K,

ηk ≥ 0,

∀k ∈ K.

(53d)

To solve Problem (50), we obtain the optimal d ∗ , t∗ , p ∗ , r ∗
with given Lagrange dual variables υ, ξ , η by solving Problem
(52) and then update Lagrange dual variables.
1) Evaluating gT DMA (υ, ξ , η ) by solving Problem (52):
First, for given υ, ξ , η , we obtain the dual function
gT DMA (υ, ξ , η ) by solving Problem (20). The Lagrangian in
(51) can be rewritten as follows
LT DMA (dd , t, p , r , υ, ξ , η ) =

K 
X
α(Rk − dk )3 Ck3
(ξk + υCk ) dk +
T2
k=1
!
K
K
K
X
X
X
ηk rk
+t
pk −
ξk rk +
k=1

−

K
X

k=1

k=1



B

ηk log2 1 +
K

(54)

+ hH
k ΘG
σ2

2

k=1




pk  − υF.

k=1

(55b)

ξk rk

k=1

!

+



B

log2 1 +
K

K
X

ηk rk

(56a)

k=1

H
hH
D,k + h k ΘG

2




pk 

σ2

s.t. 0 ≤ t ≤ T,
0 ≤ pk ≤ Pk ,

(56b)
(56c)

(49d).

(56d)

The following theorem gives the optimal solution of Problem
(55).
Theorem 4: The optimal solution of Problem (55) is
r
υCk + ξk T
∗
dk = max{Rk −
, Dk }, ∀k ∈ K.
(57)
3αCk Ck
The proof of Theorem 4 is similar to that of Theorem 2.
As for Problem (56), if pk and rk are given, when pk −
ξk rk > 0, t∗ = 0, which means that user k does not need
to offload the task to BS, and thus we can set p∗k = rk∗ = 0.
When pk − ξk rk ≥ 0, t∗ = T , at this time Problem (56) can
be rewritten as
min
p
r ,p

T

K
X

pk +

k=1

−

K
X

K
X

k=1

ηk

k=1

(ηk − T ξk )rk


B

log2 1 +
K

hH
D,k

(58a)
+ hH
k ΘG
σ2

s.t. 0 ≤ pk ≤ Pk ,
(49d).

2




pk 

(58b)
(58c)

Define f (rr , p ) as the objective function of Problem (58), i.e.,
f (rr , p ) =T

K
X

−

It is obvious that the objective function and all the constraints
of Problem (52) are decoupled for d and other variables. By
dropping the constant terms −υF , Problem (52) is equivalent
to the following Problem (55) and Problem (56), and each of
them can be decomposed into K subproblems:
!
K
3
X
α (Rk − dk ) Ck3
(55a)
+ ξk dk
min
υdk Ck +
d
T2
s.t. Dk ≤ dk ≤ Rk ,

ηk

pk +

k=1

k=1

hH
D,k

K
X

pk −

K
X

K
X

k=1

K
X

k=1

ηk

(ηk − T ξk )rk


B

log2 1 +
K

(59)

hH
D,k

+ hH
k ΘG
σ2

2




pk  .

It is not difficult to find that f (rr , p ) is a convex function with
respect to r and p . According to KKT conditions, we have
∂f
ηk Bγ
=T −
= 0,
∂pk
K(1 + γpk ) ln 2

(60)

where
γ=

H
hH
D,k + hk ΘG

σ2

2

.

Therefore, the optimal p∗k is


1
ηk B
∗
− , Pk .
pk = min
T K ln 2 γ

(61)

(62)

10

Since Problem (58) is a linear function with respect to rk , thus
when ηk > T ξk , the optimal rk∗ = 0 and when ηk ≤ T ξk , the
optimal rk∗ is


2
H
H
h
+
h
Θ
G
D,k
k
B


rk∗ =
p∗k  .
log2 1 +
(63)
2
K
σ
2) Obtaining the optimal υ ∗ , ξ ∗ , η ∗ by solving Problem
(53): Since g(υ, ξ , η ) is convex with respect to υ, ξ , η , the
Lagrange variables can be updated as follows

Algorithm 4 :Alternating Procedure for Solving Problem (49)
1:
2:
3:
4:
5:
6:
7:
8:

"

υ(t + 1) = υ(t) + δ3 (t)F −
ξk (t + 1) = [ξk (t) +

ηk (t + 1) =


K
X

d∗k Ck

k=1

δ4 (t)t∗ rk∗

−

#+

+
d∗k ]

9:

,

,

(64)
10:

(65)

(66)
+

11:
12:

Initialize d (0) , t(0) , p (0) , r (0) , θ (0) , the tolerance τ ,
iteration variable x.
repeat
Update θ using alternating 1-D search method.
x = 0, L(0) = 0.
repeat
Update Lagrange variables υ, ξ , η using Eq. (64), Eq.
(65) and Eq. (66).
Update p and r according to Eq. (62) and Eq. (63),
respectively.
Update d and t by solving Problem (55) and (56).
Calculate the objective function of Problem (49) and
the value denoted by L(x), x = x + 1.
until L(x) − L(x − 1) < τ .
until Alternating 1-D search method finishes.
Output
Output: the optimal d ∗ , t∗ , p ∗ , θ ∗ , r ∗ , and the optimal
Lagrange variables υ ∗ , ξ ∗ , η ∗ .

between users and the BS is 128 + 45 log10 d(km). The smallscale
fading coefficients are assumed to be independent and
B


∗
∗
,
−
r
p
identical
complex Gaussian distributions with zero-mean and


ηk (t) + δ5 (t) log2 1 +
k
k
K
σ2
unit-variance [37]. The standard deviation of path shadow
fading is 8 dB, and the noise power spectral density is -174
where δ3 (t), δ4 (t), δ5 (t) are the updating step sizes based on dBm/Hz. The effective capacitance coefficient is α = 10−28 ,
suitable estimates.
the CPU cycle for computing per bit data is Ck = 103
cycles/bit, and the computation offloading bandwidth is B = 1
MHz. For convenience, we set all the computation data at each
B. Using Alternating 1-D search method to optimize θ
Since it is a benchmark scheme, we do not need to use user as the same size and the maximum transmit power of each
a low complexity algorithm to guarantee the time-efficiency user is P1 = P2 = P3 = 1 W. The computation capacity of
like Section III. In this subsection, we consider to use the user k is Fk = 10 GHz (∀k ∈ K) and of edge cloud is F = 20
GHz.
alternating 1-D search method to search a sub-optimal θ .
N ×N
iθN
iθ1
In order to show the performance of our proposed RIS-based
is a
More specifically, Θ = diag(e , * * * , e ) ∈ C
NOMA-MEC
partial offloading scheme, we also compare it
diagonal matrix with N variables to be optimized, and we aim
with
other
two
benchmark schemes:
to optimize θ1 , θ2 , . . . , θN alternately. For given θ2 , . . . , θN ,
1)
Full
offloading
scheme: all users are supposed to offload
we can use the 1-D search method to obtain the optimal
their
computing
tasks
to the BS using an NOMA protocol
θ1 ∈ [0, 2π] by solving Problem (49). Similarly, we can
via
the
RIS
channel.
In
this case, since the maximum power
exhaustively search θ2 with given θ1 , θ3 . . . , θN and then
constraints
of
users
and
the maximum frequency of MEC
orderly obtain the optimal θ3 , . . . , θN . The alternating iteration
server
may
limit
the
full
offloading,
we assume that the MEC
will continue until the difference between the results of the two
have
the
ability
to
process
all
the
users'
tasks and reset F = 50
iterations is less than the allowable error tolerance. Finally,
GHz.
In
addition,
we
do
not
set
the
maximum
power on all
within the allowed error limit, we can alternately obtain the
three
users
to
make
sure
that
they
can
transmit
all
their tasks
optimal θ1 , . . . , θN . This algorithm is shown in Algorithm 4.
to the MEC server.
2) Full local computing scheme: all users are supposed to
V. N UMERICAL R ESULTS
compute their tasks by themselves. In this case, we just need
In this section, we provide the numerical results to validate to calculate the following local energy consumption
the efficiency of our proposed algorithms. We consider a two
X R3 C 3
dimensional (2-D) coordinate system where the BS is located
(67)
Elocal =
α k2k ,
at the origin (i.e., (0 m, 0 m)) and the RIS is located at
T
k∈K
(700 m, 200 m). Denote the number of reflecting elements
of the RIS by N . For the simulation, we deploy 4 users since there is no transmission between users and the BS.
that are randomly distributed in a 100 m×100 m square
First, we assume that the input computation data of three
region, where the center of this area is (1400 m, 0 m). users are all equal to Rk = 1 Mbits and the maximal latency
The channel path loss models between BS and RIS, and of users is T = 0.6 s. As show in Fig. 2, we illustrate the
from users to RIS both are 128 + 37.6 log10 d(km). Since convergence behavior of NOMA-MEC scheme (scheme 1) and
the direct path is in poor condition, the direct path loss TDMA-MEC scheme (scheme 2) under different numbers of


H
hH
D,k + h k ΘG

2



11

Scheme 1 (NOMA-MEC)
Scheme 2 (TDMA-MEC)
Full local
Full offloading

7
6
5
4
3
2
1

1
0
0.6

Scheme 1 N=10
Scheme 1 N=15
Scheme 2 N=10
Scheme 2 N=15

0.9

0.8

1

1.2

1.4

1.6

1.8

2

2.2

2.4

The number of input bits (Mbits)

Fig. 4.

Sum energy consumption versus the number of input bits.

0.8

20

0.7

Scheme 1 (NOMA-MEC)
Scheme 2 (TDMA-MEC)
Full local
Full offloading

18
0.6

0.5
1

2

3

4

5

6

7

8

Iteration number

Fig. 2. Convergence behaviours of scheme 1 and 2 under different number
of RIS elements N .

2.2

Sum energy consumption at users (J)

Sum energy consumption at users (J)

1.1

8

Sum energy consumption at users (J)

reflecting units N at the RIS. It is obvious that the proposed
algorithms converge within 7 iterations. The two transmission
schemes both converge rapidly, which indicates the efficiency
of proposed algorithms. For each curve, the initial solution is
high, which is because at the initial of optimization process,
the phases of RIS are randomly initialized and the channels
between users and BS can be in a bad condition. After the
iterations, RIS phases are optimized and the channel conditions
are suitable for efficient transmission.

16
14
12
10
8
6
4
2

RIS N=10
RIS N=15
RIS N=20

Sum energy consumption at users (J)

2
1.8

0
0.2

0.3

0.4

0.5

0.6

0.7

0.8

0.9

Maximum latency at users (s)

1.6

Fig. 5.

Sum energy consumption versus the maximum user latency T

1.4
1.2
1
0.8
0.6
0.4
0.9

1

1.1

1.2

1.3

1.4

1.5

1.6

The number of input bits (Mbits)

Fig. 3. Sum energy consumption versus the number of input bits.

Fig. 3 shows the sum energy consumption at users based
on the NOMA-MEC scheme versus the number of input
computation tasks Rk , when the numbers of RIS reflecting
units are N = 10, 15, 20, respectively and we set the maximum
user latency as T = 0.6 s. From Fig. 3, we can see that the
sum energy consumption decreases with the number of RIS
units. It is because more RIS elements can improve the channel
conditions between the BS and users. It is also found that the
sum energy increases as the number of input bits. This is due
to the fact that with the maximum latency, local users need to

use more power to calculate and transmit the increasing input
tasks.
Fig. 4 compares the performance of our proposed scheme
1 with three benchmark schemes: TDMA-MEC transmission
scheme (scheme 2), full offloading scheme and full local
computing scheme. We set the number of RIS reflecting units
as N = 15 and the maximum latency as T = 1 s, respectively.
Numerical results illustrate that with the growing number of
computation tasks, these four schemes experience different
degrees of growth. Since using the full offloading scheme
needs a large transmission rate to offload all the tasks to the
BS, its energy consumption increases significantly. It is also
found that the energy consumption of scheme 1 achieves the
best performance, especially for large input data.
In Fig. 5, we show the sum network energy consumption
versus the maximum user latency T , where Rk = 1 Mbits and
N = 10. For all schemes, the energy consumption decreases
with the maximum latency. The reason is that as the latency
becomes longer, more computation bits can be offloaded to
the MEC server, which leads to less local computation energy.

12

BS and between RIS and user k, respectively. The RIS is
located close to the X-axis of coordinate system. For the
convenience of explanation, we use the differences of Xaxis as the approximate distances between RIS and BS or
users, i.e., dRB ≈ xRIS − xBS and dR,k ≈ xk − xRIS
(when xBS ≤ xRIS ≤ xk ), where xRIS , xBS and xk are
the horizontal ordinates (i.e., X-axis) of the RIS, BS and user
k, respectively. Thus Eq. (68) can be approximated by

NOMA-MEC sum
NOMA-MEC local computing
NOMA-MEC offloading
TDMA-MEC sum
TDMA-MEC local computing
TDMA-MEC offloading

20

15

P Lk ≈128 × 2 + 37.6 log10 (xRIS − xBS )

10

(69)

+ 37.6 log10 (xk − xRIS ).

0
0.5

0.6

0.7

0.8

0.9

1

1.1

1.2

1.3

1.4

1.5

The number of input bits (Mbits)

Fig. 6. Local, offloading and sum Energy consumption versus the number
of input bits.

When the latency is long, the four curves grow closer, which
means if the users do not care about latency, the performance
of the four schemes is close. However, in a low delay system,
the proposed scheme can gain a much better performance
compared with other three schemes.
Fig. 6 shows the offloading energy, the local computing
energy and the sum energy consumptions of NOMA-MEC
and TDMA-MEC schemes versus the number of input bits,
respectively. We set T = 0.2 s and N = 10. It can be found
that both offloading and local computing energy consumptions
increase with the number of input bits and the offloading
energy consumptions of the two schemes are very close. On
the other hand, the NOMA-MEC scheme consumes much
lower local computing energy than the TDMA-MEC scheme,
since the NOMA-MEC scheme can transmit more data bits to
the BS and alleviate the local computing pressure.
In order to show the influence of distances on the RISaided network, Fig. 7 illustrates the sum energy consumption
at all users versus the horizontal ordinate of the RIS. Besides,
to investigate the influence, we rearrange the location of four
users in a square area and the coordinates of users are (1425 m,
25 m) , (1375 m, 25 m) , (1425 m, −25 m) , (1375 m, −25 m),
respectively. The BS is located at (0 m, 0 m) and the number
of RIS reflecting units is N = 10. The input computation task
is Rk = 0.5 Mbits and the maximum latency is T = 0.2
s. We assume that the RIS moves from (−100 m, 50 m) to
(1500 m, 50 m) with the step size of 100 m while keeping
the y-coordinate fixed. It can be seen from Fig. 7 that when
the RIS moves close to the BS or the users, the sum energy
consumption at all users becomes low and when the RIS moves
close to the approximate midpoint between the BS and users,
the energy consumption reaches the highest value. The reason
for having this trend is that by ignoring the small-scale fading,
the large scale channel gain of the IRS aided link for user k
can be approximated by

Since xBS + xk is the fixed distance between the BS and user
k, P Lk in Eq. (69) obtains the maximum value when xRIS −
xBS = xk − xRIS , i.e., xRIS = (xBS + xk )/2, which means
when the RIS arrives at the approximate midpoint between the
BS and user k, the channel condition becomes the worst and
the sum energy consumption reaches the peak value.

0.8

Sum energy consumption at users (J)

5

0.7
0.6
0.5
0.4
0.3
0.2

Scheme 1 (NOMA-MEC)
Scheme 2 (TDMA-MEC)

0.1
0
-200

0

200

400

600

800

1000

1200

1400

1600

Horizontal ordinate of RIS (m)

Fig. 7.

Sum energy consumption versus the horizontal ordinate of the RIS.

1.4

Sum energy consumption at users (J)

Sum energy consumption at users (J)

25

1.2

Scheme 1 (NOMA-MEC) N=10
Scheme 1 (NOMA-MEC) N=20
Scheme 2 (TDMA-MEC) N=10
Scheme 2 (TDMA-MEC) N=20

1

0.8

0.6

0.4

0.2
100

200

300

400

500

600

700

800

Longitudinal coordinates of RIS (m)

Fig. 8. Sum energy consumption versus the longitudinal ordinate of the RIS.

P Lk = 128 × 2 + 37.6 log10 dRB + 37.6 log10 dR,k ,

(68)

where dRB and dR,k are the distances between RIS and

In Fig. 8, we plot the sum energy consumption versus the
longitudinal ordinate of the RIS with different numbers of the

13

RIS reflecting units. Besides, the locations of users and the
BS are the same as that in Fig.7. The input computation task
is Rk = 0.5 Mbits and the maximum latency is T = 0.2
s. We assume that the RIS moves from (100 m, 100 m) to
(100 m, 800 m) with the step size of 100 m while keeping
the x-coordinate fixed. It is obvious that the sum energy
consumption at users increases with longitudinal ordinate of
the RIS and the increasing speed becomes slower for large
longitudinal ordinate of the RIS.
VI. C ONCLUSION
In this paper, we considered an RIS-assisted NOMA-MEC
network. We aimed at minimizing the energy consumption of
all users by jointly optimizing the RIS phase shift, the number
of transmission data, transmission rate, power control and
transmission time. Since the decoding order is not determined
before the transmission process and the problem is non-convex
due to the RIS phase variables, we decomposed the problem
into two subproblems. For the first subproblem, we utilized
the dual method to resolve this problem with given RIS phase
vector θ and obtained the closed-form solution. For the other
subproblem, with given power control p , the penalty method
is used to obtain a suboptimal solution. The block coordinate
descent process continued to alternately solve these two subproblems until the objective value converged. Furthermore, in
order to show the benefits of the proposed RIS-based NOMAMEC scheme, we proposed three benchmark schemes, including the TDMA-MEC partial offloading scheme, full local
computing scheme and full offloading scheme. For the TDMAMEC partial offloading scheme, we proposed an alternating
1-D search method which could easily obtain the suboptimal
solution of RIS phase shifts. Numerical results showed that our
proposed NOMA-MEC scheme could significantly decrease
the sum energy consumptions of all users and illustrated the
impact of distance on the performance of our proposed system.
In practice, the CSI might have estimation errors, and thus
robust tranmission design will be studied in the future work
[38], [39].
R EFERENCES
[1] A. u. R. Khan, M. Othman, S. A. Madani, and S. U. Khan, "A survey
of mobile cloud computing application models," IEEE Communications
Surveys Tutorials, vol. 16, no. 1, pp. 393–413, 2014.
[2] H. Li, G. Shou, Y. Hu, and Z. Guo, "Mobile edge computing: Progress
and challenges," in 2016 4th IEEE International Conference on Mobile
Cloud Computing, Services, and Engineering (MobileCloud), 2016, pp.
83–84.
[3] M. Chen, N. Shlezinger, H. V. Poor, Y. C. Eldar, and S. Cui,
"Communication-efficient federated learning," Proceedings of the National Academy of Sciences, vol. 118, no. 17, 2021.
[4] X. Chen, L. Jiao, W. Li, and X. Fu, "Efficient multi-user computation
offloading for mobile-edge cloud computing," IEEE/ACM Transactions
on Networking, vol. 24, no. 5, pp. 2795–2808, 2016.
[5] X. Cao, F. Wang, J. Xu, R. Zhang, and S. Cui, "Joint computation and
communication cooperation for energy-efficient mobile edge computing," IEEE Internet of Things Journal, vol. 6, no. 3, pp. 4188–4200,
2019.
[6] C. Huang, S. Hu, G. C. Alexandropoulos, A. Zappone, C. Yuen,
R. Zhang, M. Di Renzo, and M. Debbah, "Holographic MIMO surfaces
for 6g wireless networks: Opportunities, challenges, and trends," IEEE
Wireless Communications, pp. 1–8, 2020.

[7] Z. Yang, M. Chen, W. Saad, W. Xu, M. Shikh-Bahaei, H. V. Poor,
and S. Cui, "Energy-efficient wireless communications with distributed
reconfigurable intelligent surfaces," 2020.
[8] Z. Yang, M. Chen, K.-K. Wong, H. V. Poor, and S. Cui, "Federated
learning for 6g: Applications, challenges, and opportunities," arXiv
preprint arXiv:2101.01338, 2021.
[9] C. Huang, A. Zappone, G. C. Alexandropoulos, M. Debbah, and
C. Yuen, "Reconfigurable intelligent surfaces for energy efficiency in
wireless communication," IEEE Transactions on Wireless Communications, vol. 18, no. 8, pp. 4157–4170, 2019.
[10] Q. Wu and R. Zhang, "Intelligent reflecting surface enhanced wireless
network via joint active and passive beamforming," IEEE Transactions
on Wireless Communications, vol. 18, no. 11, pp. 5394–5409, 2019.
[11] S. Hong, C. Pan, H. Ren, K. Wang, and A. Nallanathan, "Artificial-noiseaided secure MIMO wireless communications via intelligent reflecting
surface," IEEE Transactions on Communications, vol. 68, no. 12, pp.
7851–7866, 2020.
[12] L. Zhang, Y. Wang, W. Tao, Z. Jia, T. Song, and C. Pan, "Intelligent
reflecting surface aided MIMO cognitive radio systems," IEEE Transactions on Vehicular Technology, pp. 1–1, 2020.
[13] Z. Yang, W. Xu, C. Huang, J. Shi, and M. Shikh-Bahaei, "Beamforming
design for multiuser transmission through reconfigurable intelligent
surface," IEEE Trans. Commun., vol. 69, no. 1, pp. 589–601, Jan. 2021.
[14] Q. Wu and R. Zhang, "Towards smart and reconfigurable environment:
Intelligent reflecting surface aided wireless network," IEEE Communications Magazine, vol. 58, no. 1, pp. 106–112, 2020.
[15] S. Zhang and R. Zhang, "Capacity characterization for intelligent reflecting surface aided MIMO communication," IEEE Journal on Selected
Areas in Communications, vol. 38, no. 8, pp. 1823–1838, 2020.
[16] C. Pan, H. Ren, K. Wang, M. Elkashlan, A. Nallanathan, J. Wang, and
L. Hanzo, "Intelligent reflecting surface aided MIMO broadcasting for
simultaneous wireless information and power transfer," IEEE Journal
on Selected Areas in Communications, vol. 38, no. 8, pp. 1719–1734,
2020.
[17] C. Pan, H. Ren, K. Wang, W. Xu, M. Elkashlan, A. Nallanathan,
and L. Hanzo, "Multicell MIMO communications relying on intelligent
reflecting surfaces," IEEE Transactions on Wireless Communications,
vol. 19, no. 8, pp. 5218–5233, 2020.
[18] T. Bai, C. Pan, Y. Deng, M. Elkashlan, A. Nallanathan, and L. Hanzo,
"Latency minimization for intelligent reflecting surface aided mobile
edge computing," IEEE Journal on Selected Areas in Communications,
pp. 1–1, 2020.
[19] T. Bai, C. Pan, H. Ren, Y. Deng, M. Elkashlan, and A. Nallanathan,
"Resource allocation for intelligent reflecting surface aided wireless
powered mobile edge computing in OFDM systems," arXiv preprint
arXiv:2003.05511, 2020.
[20] Z. Ding, X. Lei, G. K. Karagiannidis, R. Schober, J. Yuan, and V. K.
Bhargava, "A survey on non-orthogonal multiple access for 5g networks:
Research challenges and future trends," IEEE Journal on Selected Areas
in Communications, vol. 35, no. 10, pp. 2181–2195, 2017.
[21] Z. Ding, J. Xu, O. A. Dobre, and H. V. Poor, "Joint power and time
allocation for NOMA-MEC offloading," IEEE Transactions on Vehicular
Technology, vol. 68, no. 6, pp. 6207–6211, 2019.
[22] F. Wang, J. Xu, and Z. Ding, "Multi-antenna NOMA for computation
offloading in multiuser mobile edge computing systems," IEEE Transactions on Communications, vol. 67, no. 3, pp. 2450–2463, 2019.
[23] Y. Ye, R. Q. Hu, G. Lu, and L. Shi, "Enhance latency-constrained
computation in mec networks using uplink NOMA," IEEE Transactions
on Communications, vol. 68, no. 4, pp. 2409–2425, 2020.
[24] Z. Ding and H. Vincent Poor, "A simple design of irs-noma transmission," IEEE Communications Letters, vol. 24, no. 5, pp. 1119–1123,
2020.
[25] Z. Zhang, L. Lv, Q. Wu, H. Deng, and J. Chen, "Robust and secure communications in intelligent reflecting surface assisted NOMA networks,"
IEEE Communications Letters, pp. 1–1, 2020.
[26] Y. Li, M. Jiang, Q. Zhang, and J. Qin, "Joint beamforming design in
multi-cluster miso noma reconfigurable intelligent surface-aided downlink communication networks," IEEE Transactions on Communications,
pp. 1–1, 2020.
[27] D. Tse and P. Viswanath, Fundamentals of wireless communication.
Cambridge university press, 2005.
[28] X. Yuan, Y.-J. A. Zhang, Y. Shi, W. Yan, and H. Liu, "Reconfigurableintelligent-surface empowered wireless communications: Challenges and
opportunities," arXiv preprint arXiv:2001.00364, 2020.
[29] Y. Li, M. Jiang, Q. Zhang, and J. Qin, "Joint beamforming design in
multi-cluster miso noma reconfigurable intelligent surface-aided down-

14

[30]
[31]

[32]
[33]
[34]
[35]

[36]
[37]

[38]

[39]

link communication networks," IEEE Transactions on Communications,
pp. 1–1, 2020.
B. Zheng and R. Zhang, "Intelligent reflecting surface-enhanced ofdm:
Channel estimation and reflection optimization," IEEE Wireless Communications Letters, vol. 9, no. 4, pp. 518–522, 2020.
Z. Wang, L. Liu, and S. Cui, "Channel estimation for intelligent reflecting surface assisted multiuser communications: Framework, algorithms,
and analysis," IEEE Transactions on Wireless Communications, vol. 19,
no. 10, pp. 6607–6620, 2020.
L. Wei, C. Huang, G. C. Alexandropoulos, C. Yuen, Z. Zhang, M. Debbah et al., "Channel estimation for ris-empowered multi-user miso
wireless communications," arXiv preprint arXiv:2008.01459, 2020.
T. Bai, J. Wang, Y. Ren, and L. Hanzo, "Energy-efficient computation
offloading for secure uav-edge-computing systems," IEEE Transactions
on Vehicular Technology, vol. 68, no. 6, pp. 6074–6087, 2019.
S. Boyd and L. Vandenberghe, Convex Optimization.
Cambridge
University Press, 2004.
D. N. C. Tse and S. V. Hanly, "Multiaccess fading channels. i. polymatroid structure, optimal resource allocation and throughput capacities,"
IEEE Transactions on Information Theory, vol. 44, no. 7, pp. 2796–
2815, 1998.
M. Grant and S. Boyd, "CVX: Matlab software for disciplined convex
programming, version 2.1," http://cvxr.com/cvx, Mar. 2014.
M. Chen, Z. Yang, W. Saad, C. Yin, S. Cui, and H. V. Poor, "A joint
learning and communications framework for federated learning over
wireless networks," IEEE Trans. Wireless Commun., vol. 20, no. 1, pp.
269–283, Jan. 2021.
G. Zhou, C. Pan, H. Ren, K. Wang, M. D. Renzo, and A. Nallanathan,
"Robust beamforming design for intelligent reflecting surface aided miso
communication systems," IEEE Wireless Communications Letters, vol. 9,
no. 10, pp. 1658–1662, 2020.
G. Zhou, C. Pan, H. Ren, K. Wang, and A. Nallanathan, "A framework
of robust transmission design for irs-aided miso communications with
imperfect cascaded channels," IEEE Transactions on Signal Processing,
vol. 68, pp. 5092–5106, 2020.

