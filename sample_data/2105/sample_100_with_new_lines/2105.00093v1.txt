energy efficient reconfigurable intelligent surface
enabled mobile edge computing networks with
noma
arxiv210500093v1 csit 30 apr 2021
zhiyang li student member ieee ming chen member ieee zhaohui yang member ieee
jingwen zhao student member ieee yinlu wang student member ieee jianfeng shi member ieee
and chongwen huang member ieee
abstractreconfigurable intelligent surface ris has
emerged as a promising technology for achieving high spectrum
and energy efficiency in future wireless communication networks
in this paper we investigate an risaided singlecell multiuser
mobile edge computing mec system where an ris is deployed
to support the communication between a base station bs
equipped with mec servers and multiple singleantenna users
to utilize the scarce frequency resource efficiently we assume
that users communicate with bs based on a nonorthogonal
multiple access noma protocol each user has a computation
task which can be computed locally or partiallyfully offloaded
to the bs we aim to minimize the sum energy consumption
of all users by jointly optimizing the passive phase shifters
the size of transmission data transmission rate power control
transmission time and the decoding order since the resulting
problem is nonconvex we use the block coordinate descent
method to alternately optimize two separated subproblems
more specifically we use the dual method to tackle a subproblem
with given phase shift and obtain the closedform solution and
then we utilize penalty method to solve another subproblem
for given power control moreover in order to demonstrate
the effectiveness of our proposed algorithm we propose
three benchmark schemes the timedivision multiple access
tdmamec scheme the full local computing scheme and
the full offloading scheme we use an alternating 1d search
method and the dual method that can solve the tdmabased
transmission problem well numerical results demonstrate that
the proposed scheme can increase the energy efficiency and
achieve significant performance gains over the three benchmark
schemes
this work was supported in part by the national natural science foundation of china under grant 61871128 grant 61960206006 and grant
61960206005 in part by the open research fund of national mobile communications research laboratory southeast university no2021d11 universities
natural science research project of jiangsu province 20kjb510037 the
work of prof huang was supported by the fundamental research funds for
the central universities corresponding authors zhiyang li zhaohui yang
zhiyang li ming chen jingwen zhao and yinlu wang are with national mobile communications research laboratory southeast university
nanjing 211111 china emails lizhiyang chenming zhaojingwen yinluwangseueducn
zhaohui yang is with centre for telecommunications research department
of informatics engineering kings college london london wc2b 4bg uk
email yangzhaohuikclacuk
j shi is with the school of electronic and information engineering nanjing university of information science and technology nanjing
210044 china and also with the national mobile communications research laboratory southeast university nanjing 210096 china email
jianfengshinuisteducn
c huang is with college of information science and electronic engineering zhejiang university hangzhou 310027 china and with international
joint innovation center zhejiang university haining 314400 china and also
with zhejiang provincial key laboratory of info proc commun  netw
ipcan hangzhou 310027 china email chongwenhuangzjueducn
index termsreconfigurable intelligent surface ris mobileedge computing mec nonorthogonal multiple access noma
i i ntroduction
a related works
n the forthcoming sixthgeneration 6g networks mobile
data will experience a phenomenal growth most of which
are generated by edge devices in realtime such as mobile
phones computers and sensors since most of the users
are sensors with limited computing capabilities mobile edge
computing mec as a promising technology can efficiently
guarantee the computing resource reduce the capital cost and
provide flexibility in the mec framework wireless devices
offload their computation intensive or delaysensitive tasks to
nearby base stations bss or servers at the edge of radio
access networks to save the battery power and computation
resources 13 driven by the benefits of mec networks
there were a large number of contributions studying mecbased systems and numerous efficient algorithms were proposed to solve joint communication and computation resource
allocation problems 4 5
meanwhile reconfigurable intelligent surface ris can be
used as a passive reflector which does not need radio frequency
rf module to forward signals 68 the ris could change
the channel condition for the mec service and significantly
increase spectrum spatial efficiency the ris consists of many
lowcost and reconfigurable printed dipoles and the smart
controller can change the specific angles of these passive
elements according to the requirements of systems 9 10
by optimizing the phase shifts of ris one can both suppress
the interference and boost the desired signal which enhances
transmission security and efficiency 1113 14 introduced
the structure of ris that it is a massive lowcost reflecting elements mounted surface and how the ris achieved 3d passive
beamforming via the amplitude and phase shift optimization
the authors in 15 introduced the fundamental capacity limit
characterization of risaided multipleinput multipleoutput
mimo communication networks by jointly optimizing the
transmit covariance matrix and ris reflection coefficients in
16 the ris was shown to extend the operational range of the
wireless powered sensors in simultaneous wireless information
and power transfer swipt networks the ris was shown to
significantly enhance the data rate of the celledge users in 17
for the multicell networks by utilizing the benefits of ris
including improving channel conditions enhancing reflectionaided beamforming gain and energy transmission the potential
of mec systems can be significantly improved for example
18 investigated risbased mec systems where users could
choose to offload partial of their tasks to the mec with the
help of ris numerical results showed that the overall system
latency decreases significantly compared with the system without ris in 19 the authors considered a wireless powered
mec network and an ris was used to aid wireless energy
transfer and computation offloading however in 18 and
19 the authors only studied the performance improvement
when integrating ris into mec networks without studying
the performance under various multiple access schemes
on the other hand nonorthogonal multiple access noma
is recognized as an essential radio access technology in the
fifth generation 5g and beyond 5g 20 for traditional
orthogonal multiple access oma techniques such as time
division multiple access tdma and orthogonal frequency
division multiple access ofdma each resource block is
occupied by only one user with noma users can reuse
the same frequency resource to save the energy and spectrum
resources since noma technique can significantly enhance
the system spectrum efficiency it has been extensively studied
in mecbased systems in 21 the authors considered a
nomaassisted mec system and obtained closedform expressions where the energy consumption and the time interval
were jointly optimized 22 studied a multiuser mec system
where users offload their computation tasks through noma
technique and the bs decoded all offloaded tasks by successive
interference cancellation sic in which the noma decoding order was optimized 23 proposed a hybrid offloading
scheme where the users were divided into two groups and
their locations followed a homogeneous poisson point process
they also investigated distancedependent noma grouping
schemes in mec networks and used numerical results to
show the advantages and disadvantages of each scheme the
advantages of noma technology and its wide applications
inspire the idea of using noma as a means of transmission
in our model
when the channel gain differences of users are large or the
frequency resource is limited the advantages of noma are
more obvious and ris can be deployed to help achieve this
goal by carefully designing its phase shifts a design of the
risassisted noma downlink transmission with the impact
of hardware impairments was proposed in 24 moreover in
25 the authors considered an ris assisted noma network
where a robust beamforming scheme was proposed in an
eavesdropping scenario with imperfect channel state information csi for the eavesdropper furthermore multicluster
multipleinputsingleoutput miso noma communication
networks were discussed in 26 and riss were utilized to
assist the communication however the above works 24
26 did not consider risaided noma communication for
the mec networks
b motivations and contributions
the abovementioned works 1422 mainly studied the
nomamec networks or the ris assisted mec networks
since ris can significantly enhance the system performance
by reconfiguring the channel conditions and noma can be
used to serve multiple users simultaneously at the same
resource block 2426 we consider to utilize ris in the
nomamec networks to further improve the energy efficiency in this paper we focus on an risaided nomamec
network where the direct links between users and the bs
are in poor conditions and the ris is used to guarantee the
quality of service qos requirements of mec services our
contributions can be summarized as follows
 we propose an risaided multiuser mec miso system
where a multiantenna bs also acts as an mec server
serves multiple singleantenna users using noma to
minimize the sum energy consumption of all users we
jointly optimize the passive reflecting beamforming ie
phase shifts of ris the number of transmission data
transmission rate power control transmission time as
well as the decoding order
 to tackle the formulated nonconvex problem we propose a lowcomplexity algorithm by solving two subproblems iteratively in particular for the first subproblem
with given phase shifts we apply the dual decomposition
method to obtain the optimal closedform solution as
well as the optimal decoding order then for the second
subproblem with given power control we utilize the
penalty method to transform this subproblem into a series
of convex problems and obtain a suboptimal solution
 to demonstrate the effectiveness of our proposed scheme
we provide a tdmabased transmission model as a
benchmark to solve the energy efficient resource allocation for tdma case we propose the dual decomposition
method with 1d search
 simulation results show that our proposed rismec with
noma scheme can dramatically decrease the sum energy
consumption at users compared with three conventional
benchmark schemes in addition we discuss the impact
of distances on the performance of our proposed system
c organization and notation
the rest of this paper is organized as follows in section
ii we introduce the system model and problem formulation
of the risaided nomabased mec network in section iii
we introduce an efficient block coordinate descent algorithm
for solving the proposed problem in section iv we propose
a tdmabased partial offloading scheme as a benchmark and
solve the tdmabased transmission problem in section v
we show the numerical results and evaluate the performance
of our proposed schemes finally we give the conclusions in
section vi
notations scalars vectors and matrices are denoted by
italic letters bold lower and upper case letters respectively
rxy and cxy denote the space of x  y realvalued and
complexvalued matrices respectively cx denotes the sets of
all complexvalued x  1 vector rex denotes the real part
xk denotes the euclidean norm of
of a complex number x kx
x denotes the diagonal
the complexvalued vector x and diagx
matrix and the diagonal elements corresponding to the elements in vector x  the distribution of a circularly symmetric
complex gaussian cscg random vector with mean vector
   2 
 and covariance matrix  2 is denoted by n  cn 
where  means distributed as
which can be equivalent to
rk ck  fk t
 k  k
defining fk as the required cpu frequency for computing each
cpu cycle at user k it needs to satisfy
dk 
ckloc
the local energy consumption can be expressed as 22
fk 
irs
ekloc  fk2 ckloc 
noma
direct link  poor condition 
rk  dk 3 ck3
it is also assumed that the edge cloud has finite computation
capacity f  as a result the offloading data of all users should
satisfy the following computation constraint
ekloc  
user 1
user 2
user 3
user 4
fig 1 risbased mec uplink system model
a system model
as shown in fig1 we consider an risenhanced uplink
system with one bs k users and one ris which helps the
communication between the bs and users the number of
transmit antennas at the bs and that of reflecting elements
at the ris are respectively denoted by m and n  let k 
1 2     k denote the set of all users the bs schedules the
users to completely or partially offload tasks the users with
partial or complete offloading respectively offload a fraction
of or all input data to the bs while the users with partial or no
offloading respectively compute a fraction of or all input data
using local central processing unit cpu due to the small
latency of cloud computing and small sizes of computation
results the time of cloud computing and downloading from
the bs is negligible compared to the time of mobile offloading
and local computing
b task computing model
the local computing model is described as follows since
only dk bits are offloaded to the bs the remaining rk  dk
bits are needed to be computed locally at user k the total
cpu cycles for local computation at user k is given by
k  k
where ck is the number of cpu cycles required for computing
1bit input data at user k
let fk denote the maximum computation capacity of user k
which is measured by the number of cpu cycles per second
denoting t as the maximal latency of all users we can obtain
the following local computation latency constraints
rk  dk ck  fk t
k  k
dk ck  f
c offloading model
ii s ystem m odel and p roblem f ormulation
ckloc  rk  dk ck 
where  represents the effective capacitance coefficient which
is determined by the chip architecture by substituting 1 and
4 into 5 we have
noma
bs integrated with mec
servers
denote the bandwidth of the network by b the power of
the additive white gaussian noise by  2 and the maximum
transmit power of user k by pk  denote the transmit signal
of user k by pk sk  where pk is the transmit power which
satisfies
0  pk  pk 
and sk is the signal with zero mean and unit variance with
the help of ris the received signal at the bs is
p k sk  n h
dk  h k g
where h h
denotes the direct link channel response
dk  c
from user k to the bs g  cn m and hk  cn
respectively denote the channel responses from bs to ris
and from ris to user k the phase shift matrix of the ris
is   diagei1      ein   cn n with n  0 2
n  n  1     n  and n k  cm denotes the additive
white gaussian noise at the bs with n k  cn 00  2 i
by allowing the bs to properly design the decoding order of
noma and employing timesharing among different decoding
orders the capacity region for the k users is achievable and
it corresponds to the following polymatroid 27
cpp    r  rn 
b log2
x hh
dk h
k g
 k  k   
where rk denotes the achievable rate of user k r 
r1      rk    1      n   is an empty set and
k  k   means that k is a nonempty subset of k
denoting the uplink transmission time by t the energy
consumption for offloading at user k is given by
ekoff
 tpk 
k  k
a solve problem 13 for given 
firstly for given   the optimization problem 13 can be
reformulated as
to satisfy that dk bits can be offloaded to the bs we have
trk  dk 
k  k
rk  dk 3 ck3
min
p r
d tp
d problem formulation
in light of some effectively channel estimation methods for
risaided wireless networks were proposed in existing works
2832 then in this paper we have the assumption that
the csi is perfectly obtained at the transmitter side
based on the above model the sum user energy minimization problem is formulated as
min
d tp
rk  dk 
ck3
 tpk 
13a
dk ck  f
13b
trk  dk  k  k
r  cpp  
13c
13d
dk  dk  rk  k  k
0  pk  pk  k  k
13f
13g
0  t  t
iii a n e fficient
algorithm to
s olve p roblem 13
obviously problem 13 is nonconvex due to the nonconvex
constraints 13c and 13d in order to solve problem 13 we
propose an efficient iterative algorithm based on the alternating
method in particular for given phase shift vector   we use the
dual method to tackle this subproblem and obtain the optimal
offloading bits d   transmission time t  power allocation
p  and use a time sharing technique to obtain the optimal
decoding order and transmission rate r   then for given p  we
use the penalty method to optimize d  t r and   the suboptimal solution to problem 13 is obtained via iteratively
solving the aforementioned two subproblems
in the following we show how to solve one subproblem
of problem 13 with given  and use the penalty method to
solve another subproblem with given p 
dk ck  f
trk  dk 
r  cpp
14b
k  k
0  t  t
dk  dk  rk 
0  pk  pk 
14c
14d
14e
14f
k  k
k  k
14g
theorem 1 when t  0 the optimal transmission time t
of problem 14 is t  t 1
proof for given d  problem 14 can be written as
min t
p r
13e
wheren d  d1   o  dk  p  p1      pk  and dk 
k fk t
 0 is obtained from equation 3 the obmax rk cc
jective function 13a represents the total energy consumption
of all users including both offloading energy and computing
energy constraint 13b shows the maximum computation
ability at the bs while each user can successfully transmit
the task bits as shown in 13c the rate region of noma
is expressed in constraint 13d constraint 13e ensures that
the offloading can be completed in time requirement of t for
all users constraint 13f shows the minimum and maximum
requirements of the offloaded bits of each user the maximum
power constraint is given in 13g
14a
15a
trk  dk 
r  cpp
k  k
0  t  t
0  pk  pk 
15b
15c
15d
k  k
15e
assume that t  pk  is the optimal solution of problem 15
with 0  t  t  in order to minimize the objective function
of problem 15 we have
thus constraint 15c can be rewritten as
cpp    r  rn 
rk 
15f
15g
t b log2 1 
dk  h k g
pk   k
define s  t t  thus s  1 according to the monotonicity
of 15g we have
pk  16
dk  t b log2 1 
 st b log2 1 
dk  h k g
pk  
where the last inequality in 16 follows from the fact that
function x log2 1  1x is monotonically increasing when
1 compared to 33 the optimization problem is formulated in a different
manner and the method in the proof is different
x  0 and we can find a coefficient s 0  s  1 that
satisfies the following condition
dk  t b log2 1 
pk 
1 evaluating g   by solving problem 20 first for
given    we obtain the dual function g   by solving
problem 20 the lagrangian in 19 can be rewritten as
follows
 st b log2 1 
dk  h k g
s pk  
ldd  t p  r     
according to the objective function of 15 we have
t pk
s t 
t pk 
st  s pk 
which means when 0  t  t  we can always
construct
t p
a new set of solution t  t and pk  s t k that makes
the objective function of problem 15 smaller than when the
solutions are t and pk  therefore when t  0 the optimal
solution of t is t  t 
it is found that all constraints in problem 14 are convex
except 14c constraint 14c is neither convex nor concave
because its hessian is indefinite which has a positive and a
negative eigenvalue however function 14c is quasiconcave
for all t  0 dk  0 since the suplevel sets t rk  r  trk 
dk  are convex sets for all dk 34
therefore problem 14 is convex and satisfies the slaters
condition based on which the strong duality between problem
14 and its dual problem holds the partial lagrangian
function of problem 14 is
ldd t p  r     
rk  dk 3 ck3
 tpk 
dk ck  f  
k dk  trk 
where  and k are the lagrange dual variables the lagrange
dual function is given by
g    min ldd  t p r   
20a
p r
d tp
20b
0  pk  pk 
k  k
k  k
20c
20d
20e
accordingly the lagrange dual problem can be expressed as
max
g  
st k  0
  0
dk ck  
rk  dk  ck3
 k dk 
tpk  k trk   f
note that the objective function as well as all the constraints
of problem 20 is decoupled for d and other variables
then problem 20 can be decomposed into 2k subproblems
through dropping the constant term f as follows
min
dk ck 
 rk  dk 3 ck3
 k dk 
st dk  dk  rk 
23a
23b
and
min
p t
r p
tpk  k trk 
st r  cpp
0  t  t
0  pk  pk 
24a
24b
24c
k  k
24d
it is obvious to find that problem 23 is a convex problem
for dk  and the slater conditions hold the following theorem
gives the optimal solution of problem 23
theorem 2 the optimal solution of problem 23 is
ck  k t
dk  maxrk 
 dk  k  k
3ck ck
proof since each user k is independent of each other the
lagrangian function corresponding to user k is
st r  cpp
0  t  t
dk  dk  rk 
 rk  dk  ck3
 k dk  k dk  dk 
 k rk  dk 
lk dk ck 
where k   k are the lagrangian dual multipliers associated
with constraint 19b the karushkuhntucke kkt conditions of problem 23 are as follows
21a
k  k
21b
21c
to tackle problem 14 we solve problem 20 to obtain
g   with given   and then solve problem 21 to
update the lagrange variables  and   the optimal solutions
d   t  p   r  can be obtained by iteratively solving these
two problems
3 rk  dk 2 ck3
 ck  k 
 k   k  0
27a
k dk  dk   0
27b
 k rk  dk   0
dk 
 rk 
0  k
27c
27d
27e
substituting 27d and 27e into 27b and 27c we have
k   k  0 when dk  dk  rk  solving conditions 27a
we can obtain the optimal dk  which is given by
 rk
ck  k t
dk  rk 
3ck ck
where xb  minmaxx b a since
ck  k t
rk 
 rk 
3ck ck
we have
ck  k t
 dk 
dk  maxrk 
3ck ck
thus theorem 2 is proved
the objective
function of problem 24 is a linear function
of t if k1 pk  k rk   0 then the optimal transmission
time is t  0 which means that all tasks
to be computed
pneed
locally and we can set pk  rk  0 if k1 pk k rk   0
then the optimal transmission time is t  t and in this case
problem 24 can be transformed into
min t
r p
pk  k rk 
31a
st r  cpp
0  pk  pk  k  k
31b
31c
to solve problem 31 we first consider the following subproblem with given p
max
32a
st r  cpp
32b
according to theorem 3 the optimal decoding order is
determined by the order of the lagrange multipliers it has
been proven in 35 lemma 32 that the complexity of solving
problem 32 is ok log2 k using 33 problem 31 can
be rewritten as
min t
pk  k  k1
34a
b log2
st 0  pk  pk  k  k
 hh
34b
assuming rk is the achievable rate in time slot  and each
length of time slots is obtained by solving the following
problem
find  1       
36a
whose optimal solution can be obtained via the following
theorem as shown in 35
theorem 3 the optimal rate
h vector of problem i32
     rk
is given by one vertex r   r1
 r2
polymatroid cpp   where r  represents the optimal rate
vector under the optimal decoding order   1     k
is the
determined by 1      k  0 and rk
achievable rate of user k given by 27
1  i1 kh
di  h ig k pi
rk  b log2
pk1 h
hdi  h h
1  i1
ig k pi
  1 
k rk
for the convenience of notation we set k1  0 note
that problem 34 is convex with respect to p  and it can be
easily solved by the standard toolbox such as cvx 36 let
p  denote the optimal solution to problem 34 and the optimal
r  can be obtained by substituting p into equation 33
2 using time sharing method to obtain primal optimal r 
and decoding order for problem 14 it is worth mentioning
that the decoding order in problem 14 is determined by
  however if there exists k and k  such that k  k 
the decoding order as well as the transmission rate r  is
not unique in this case the primal optimal solution can be
obtained by timesharing method
more specifically define  1       l as l disjoint subsets
l  as the
in which k  k k k    l  are equal define 
l   2 l  1     l
cardinality of the set  l  and there are 
to find the optimal decoding order by timesharing we can
divide the transmission time t into  time slots where 
can be expressed as
  rk  dk 
k  k
36b
   t 
0     t 
36c
k  k
36d
problem 36 is a linear problem and can be easily solved by
cvx
3 obtaining the optimal     by solving problem 21
   is obtained     can be obtained by solving
since g
   is convex with respect to   
problem 21 although g
yet may not be differentiable in general therefore     can
be updated as follows
x  1  x  1 xf 
dk ck
k x  1  k x  2 xt rk  dk  
where a represents the function maxa 0 x is the iteration number and 1 x 2 x are the dynamically chosen step
size sequences which are based on suitable estimates
b solve problem 13 for given p
for given p  problem 13 can be rewritten as follows
then problem 40 can be reformulated as
min
d tr
rk  dk 
ck3
 tpk 
dk ck  f
trk  dk 
r  c 
39b
k  k
0  t  t
dk  dk  rk 
39a
k  k
d r
rk  dk 3 ck3
dk ck  f
dk  t rk 
r  c 
dk  dk  rk 
k  k
40a
constraint 42 is nonconvex with respect to  and u  and
we use the successive convex approximation sca method
to approximate it by a convex constraint let u r denote the
vector u in the rth iteration of the sca method constraint
42 can be approximated by
un   1
44e
44f
n  n 
k  k
44g
noting that 44f is still a nonconvex constraint we consider to
utilize the penalty method and problem 44 can be formulated
rk  dk 3 ck3
1  un 2
min
45a
dk ck  f
45b
dk  dk  rk  k  k
dk  t rk  k  k
40d
40e
k  h h
dkh dk  u v kh dk  h dkv k u  u v k v k u 
44b
dk  dk  rk  k  k
44c
dk  t rk  k  k
44d
x k
pk  k  k  
rk  b log2 1 
40c
44a
dk ck  f
g  cn m  we introduce a slack
where v k  diagh
k g
vector   1  2      k  which satisfies
 hh
dkh dk  u v kh dk  h dkv k u 
r u
d r
h h
 hh
dkh dk  h k gh dk  h dkg  h k
h h
 hh
k gg  h k
 hh
dkh dk  u v kh dk  h dkv k u  u v k v k u 
k 2re u rh v k u  u r  u rh v kv h
k u
39f
it is not difficult to find that all constraints in problem 40
are convex except 40d define u  u1      un h  where
un  ein  n  1     n and we have
dk  h k g
39d
39e
40b
k  k
min
r u
d r
39c
according to theorem 1 we have t  0 or t  t  when
t  0 which means that all tasks should be computed locally
and the optimal solution can be d   0  r   0     0  when
t  t  problem 39 can be rewritten as
min
rk  dk 3 ck3
44e
un   1
n  n 
k  k
45c
45d
45e
45f
45g
where
p q is a large positive coefficient obviously
q nn 1  un 2 enforces that when 1  un 2  0 n 
n  u obtains the optimal solution to handle the nonconvexity
of problem 45 sca is utilized to approximate the objective
function as
rk  dk 3 ck3
1  urn 2
 2q
r urn un  urn  
where un denotes un in the rth iteration of the sca method
based on the aforementioned
approximations
by dropping
the constant term q nn 1  urn 2  problem 39 can be
rewritten as
min
r u
rk  dk 3 ck3
 2q
r urn un  urn 
47a
dk  t rk  k  k
0  t  t
un   1
44e
n  n 
k  k
47b
47c
47d
47e
47f
since problem 47 is a convex problem we can utilize the
interior point method or cvx 36 to obtain the optimal
solution of problem 47 moreover the solution of  can be
updated based on u 
c iterative algorithm for solving problem 13
the alternating procedure for solving problem 13 is given
in algorithm 1 we utilize a block coordinate descent method
to alternately solve problem 14 and problem 39 and
finally obtain the suboptimal solution since the objective
value decreases with the iteration number and has a finite lower
bound the algorithm is guaranteed to converge
the procedure for solving problem 14 is shown as algorithm 2 the dual method is introduced to find the optimal
closedform solutions of problem 14 as well as the optimal
decoding order to solve problem 39 the penalty method is
utilized to approximately transform this problem to problem
47 and the procedure of solving problem 47 is shown in
algorithm 3
algorithm 1 block coordinate descent algorithm for problem 13
1 initialize d0  t0  p 0  r 0   0  the tolerance  
iteration variable a  0
2 repeat
with  a  update d a  ta  r a  r a by solving
problem 14
with p a  update d a  ta  r a   a by solving
problem 39
set a  a  1
6 until the objective value of problem 13 converges
algorithm 2 alternating procedure for solving problem 14
initialize   the tolerance   iteration variable i  0
repeat
update lagrange variables   using eq 37 and eq
set the permutation   st 1      k  0
update p by solving problem 34
update r by using eq 33
update d and t by solving problem 23 and 24
calculate the objective function of problem 13 and
the value is denoted by li i  i  1
until li  li  1   
output
output d a  ta  p a  and lagrange variables a   a 
by solving problem 36 the optimal r a and decoding
order can be obtained
iv tdma s cheme
in this section we consider an risbased tdmamec
model to serve as a benchmark for the aforementioned risbased nomamec transmission model in the tdma protocol the time sharing factor of each user is 1k and the rate
of the kth user is
rk 
log2 1 
initialize p a 
use the interior point method to update d a 
ta  r a  u a by solving problem 47
update  a based on u a 
output
output d a  ta  r a   a 
dk  h k g
pk   k  k 48
similar to the nomabased model in section ii we provide
the following energy minimization problem for risassisted
tdmamec system model
min
p r
d tp
rk  dk 3 ck3
 tpk 
49a
dk ck  f
trk  dk 
49b
k  k
dk  h k g
rk 
log2 1 
49c
pk   k  k
t  t
0  pk  pk  k  k
dk  dk  rk  k  k
49d
49e
49f
49g
we use 49d to replace 48 because if 49d holds with
inequality we can always find a smaller pk until the optimal
solution is obtained thus 49d is equivalent to 48 in problem 49 it is noted that problem 49 is a simplified version
of problem 13 it is because without noma technique
the number and complexity of tdma rate constraints are
dramatically reduced for solving problem 49 we firstly
solve this problem for given  and then use alternating 1d search method to obtain the suboptimal   then alternate
the two processes until the suboptimal solution is obtained
a solving problem 49 for given 
it is not difficult to find that for given   problem 49 can
be written as follows
algorithm 3 algorithm for solving problem 47
for comparison
min
p r
d tp
rk  dk 3 ck3
 tpk 
49b  49g
50a
50b
problem 50 is a convex problem because constraint 49c
is quasiconcave and other constraints are convex the partial
lagrangian of problem 50 is
lt dma dd t p  r       
and
rk  dk 3 ck3
 tpk 
min
r p
dk ck  f  
k dk  trk 
dk  h k g
log2 1 
k rk 
correspondingly the lagrange dual function is
pk  
gt dma       min lt dma dd t p  r    
d tp
st t  t
52a
52b
dk  dk  rk  k  k
0  pk  pk  k  k
52c
52d
where  k  k are the lagrange dual variables the lagrange dual problem is
max gt dma     
53a
st   0
k  0
53b
53c
k  k
k  0
k  k
53d
to solve problem 50 we obtain the optimal d   t  p   r 
with given lagrange dual variables     by solving problem
52 and then update lagrange dual variables
1 evaluating gt dma      by solving problem 52
first for given      we obtain the dual function
gt dma      by solving problem 20 the lagrangian in
51 can be rewritten as follows
lt dma dd  t p  r       
rk  dk 3 ck3
k  ck  dk 
k rk
pk 
k rk 
k log2 1 
 hh
k g
pk   f
55b
k rk
log2 1 
k rk
56a
dk  h k g
pk 
st 0  t  t
0  pk  pk 
56b
56c
49d
56d
the following theorem gives the optimal solution of problem
theorem 4 the optimal solution of problem 55 is
ck  k t
dk  maxrk 
 dk  k  k
3ck ck
the proof of theorem 4 is similar to that of theorem 2
as for problem 56 if pk and rk are given when pk 
k rk  0 t  0 which means that user k does not need
to offload the task to bs and thus we can set pk  rk  0
when pk  k rk  0 t  t  at this time problem 56 can
be rewritten as
min
r p
pk 
k  t k rk
log2 1 
58a
 hh
k g
st 0  pk  pk 
49d
pk 
58b
58c
define f rr  p  as the objective function of problem 58 ie
f rr  p  t
it is obvious that the objective function and all the constraints
of problem 52 are decoupled for d and other variables by
dropping the constant terms f  problem 52 is equivalent
to the following problem 55 and problem 56 and each of
them can be decomposed into k subproblems
 rk  dk  ck3
55a
 k dk
min
dk ck 
st dk  dk  rk 
pk 
pk 
k  t k rk
log2 1 
 hh
k g
pk  
it is not difficult to find that f rr  p  is a convex function with
respect to r and p  according to kkt conditions we have
k b
k1  pk  ln 2
where
dk  hk g
therefore the optimal pk is
k b
  pk 
pk  min
t k ln 2 
since problem 58 is a linear function with respect to rk  thus
when k  t k  the optimal rk  0 and when k  t k  the
optimal rk is
rk 
pk  
log2 1 
2 obtaining the optimal         by solving problem
53 since g     is convex with respect to      the
lagrange variables can be updated as follows
algorithm 4 alternating procedure for solving problem 49
t  1  t  3 tf 
k t  1  k t 
k t  1 
dk ck
4 tt rk
dk 
initialize d 0  t0  p 0  r 0   0  the tolerance  
iteration variable x
repeat
update  using alternating 1d search method
x  0 l0  0
repeat
update lagrange variables     using eq 64 eq
65 and eq 66
update p and r according to eq 62 and eq 63
respectively
update d and t by solving problem 55 and 56
calculate the objective function of problem 49 and
the value denoted by lx x  x  1
until lx  lx  1   
until alternating 1d search method finishes
output
output the optimal d   t  p      r   and the optimal
lagrange variables         
between users and the bs is 128  45 log10 dkm the smallscale
fading coefficients are assumed to be independent and
identical
complex gaussian distributions with zeromean and
k t  5 t log2 1 
unitvariance 37 the standard deviation of path shadow
fading is 8 db and the noise power spectral density is 174
where 3 t 4 t 5 t are the updating step sizes based on dbmhz the effective capacitance coefficient is   1028 
suitable estimates
the cpu cycle for computing per bit data is ck  103
cyclesbit and the computation offloading bandwidth is b  1
mhz for convenience we set all the computation data at each
b using alternating 1d search method to optimize 
since it is a benchmark scheme we do not need to use user as the same size and the maximum transmit power of each
a low complexity algorithm to guarantee the timeefficiency user is p1  p2  p3  1 w the computation capacity of
like section iii in this subsection we consider to use the user k is fk  10 ghz k  k and of edge cloud is f  20
ghz
alternating 1d search method to search a suboptimal  
n n
in order to show the performance of our proposed risbased
is a
more specifically   diage      e   c
nomamec
partial offloading scheme we also compare it
diagonal matrix with n variables to be optimized and we aim
with
other
two
benchmark schemes
to optimize 1  2      n alternately for given 2      n 
full
offloading
scheme all users are supposed to offload
we can use the 1d search method to obtain the optimal
their
computing
tasks
to the bs using an noma protocol
1  0 2 by solving problem 49 similarly we can
via
the
ris
channel
this case since the maximum power
exhaustively search 2 with given 1  3     n and then
constraints
users
and
the maximum frequency of mec
orderly obtain the optimal 3      n  the alternating iteration
server
may
limit
the
full
offloading
we assume that the mec
will continue until the difference between the results of the two
have
the
ability
process
all
the
users
tasks and reset f  50
iterations is less than the allowable error tolerance finally
ghz
addition
not
set
the
maximum
power on all
within the allowed error limit we can alternately obtain the
three
users
make
sure
that
they
can
transmit
all
their tasks
optimal 1      n  this algorithm is shown in algorithm 4
to the mec server
2 full local computing scheme all users are supposed to
v n umerical r esults
compute their tasks by themselves in this case we just need
in this section we provide the numerical results to validate to calculate the following local energy consumption
the efficiency of our proposed algorithms we consider a two
x r3 c 3
dimensional 2d coordinate system where the bs is located
elocal 
 k2k 
at the origin ie 0 m 0 m and the ris is located at
700 m 200 m denote the number of reflecting elements
of the ris by n  for the simulation we deploy 4 users since there is no transmission between users and the bs
that are randomly distributed in a 100 m100 m square
first we assume that the input computation data of three
region where the center of this area is 1400 m 0 m users are all equal to rk  1 mbits and the maximal latency
the channel path loss models between bs and ris and of users is t  06 s as show in fig 2 we illustrate the
from users to ris both are 128  376 log10 dkm since convergence behavior of nomamec scheme scheme 1 and
the direct path is in poor condition the direct path loss tdmamec scheme scheme 2 under different numbers of
dk  h k g
scheme 1 nomamec
scheme 2 tdmamec
full local
full offloading
scheme 1 n10
scheme 1 n15
scheme 2 n10
scheme 2 n15
the number of input bits mbits
fig 4
sum energy consumption versus the number of input bits
scheme 1 nomamec
scheme 2 tdmamec
full local
full offloading
iteration number
fig 2 convergence behaviours of scheme 1 and 2 under different number
of ris elements n 
sum energy consumption at users j
sum energy consumption at users j
sum energy consumption at users j
reflecting units n at the ris it is obvious that the proposed
algorithms converge within 7 iterations the two transmission
schemes both converge rapidly which indicates the efficiency
of proposed algorithms for each curve the initial solution is
high which is because at the initial of optimization process
the phases of ris are randomly initialized and the channels
between users and bs can be in a bad condition after the
iterations ris phases are optimized and the channel conditions
are suitable for efficient transmission
ris n10
ris n15
ris n20
sum energy consumption at users j
maximum latency at users s
fig 5
sum energy consumption versus the maximum user latency t
the number of input bits mbits
fig 3 sum energy consumption versus the number of input bits
fig 3 shows the sum energy consumption at users based
on the nomamec scheme versus the number of input
computation tasks rk  when the numbers of ris reflecting
units are n  10 15 20 respectively and we set the maximum
user latency as t  06 s from fig 3 we can see that the
sum energy consumption decreases with the number of ris
units it is because more ris elements can improve the channel
conditions between the bs and users it is also found that the
sum energy increases as the number of input bits this is due
to the fact that with the maximum latency local users need to
use more power to calculate and transmit the increasing input
tasks
fig 4 compares the performance of our proposed scheme
1 with three benchmark schemes tdmamec transmission
scheme scheme 2 full offloading scheme and full local
computing scheme we set the number of ris reflecting units
as n  15 and the maximum latency as t  1 s respectively
numerical results illustrate that with the growing number of
computation tasks these four schemes experience different
degrees of growth since using the full offloading scheme
needs a large transmission rate to offload all the tasks to the
bs its energy consumption increases significantly it is also
found that the energy consumption of scheme 1 achieves the
best performance especially for large input data
in fig 5 we show the sum network energy consumption
versus the maximum user latency t  where rk  1 mbits and
n  10 for all schemes the energy consumption decreases
with the maximum latency the reason is that as the latency
becomes longer more computation bits can be offloaded to
the mec server which leads to less local computation energy
bs and between ris and user k respectively the ris is
located close to the xaxis of coordinate system for the
convenience of explanation we use the differences of xaxis as the approximate distances between ris and bs or
users ie drb  xris  xbs and drk  xk  xris
when xbs  xris  xk  where xris  xbs and xk are
the horizontal ordinates ie xaxis of the ris bs and user
k respectively thus eq 68 can be approximated by
nomamec sum
nomamec local computing
nomamec offloading
tdmamec sum
tdmamec local computing
tdmamec offloading
p lk 128  2  376 log10 xris  xbs 
 376 log10 xk  xris 
the number of input bits mbits
fig 6 local offloading and sum energy consumption versus the number
of input bits
when the latency is long the four curves grow closer which
means if the users do not care about latency the performance
of the four schemes is close however in a low delay system
the proposed scheme can gain a much better performance
compared with other three schemes
fig 6 shows the offloading energy the local computing
energy and the sum energy consumptions of nomamec
and tdmamec schemes versus the number of input bits
respectively we set t  02 s and n  10 it can be found
that both offloading and local computing energy consumptions
increase with the number of input bits and the offloading
energy consumptions of the two schemes are very close on
the other hand the nomamec scheme consumes much
lower local computing energy than the tdmamec scheme
since the nomamec scheme can transmit more data bits to
the bs and alleviate the local computing pressure
in order to show the influence of distances on the risaided network fig 7 illustrates the sum energy consumption
at all users versus the horizontal ordinate of the ris besides
to investigate the influence we rearrange the location of four
users in a square area and the coordinates of users are 1425 m
25 m  1375 m 25 m  1425 m 25 m  1375 m 25 m
respectively the bs is located at 0 m 0 m and the number
of ris reflecting units is n  10 the input computation task
is rk  05 mbits and the maximum latency is t  02
s we assume that the ris moves from 100 m 50 m to
1500 m 50 m with the step size of 100 m while keeping
the ycoordinate fixed it can be seen from fig 7 that when
the ris moves close to the bs or the users the sum energy
consumption at all users becomes low and when the ris moves
close to the approximate midpoint between the bs and users
the energy consumption reaches the highest value the reason
for having this trend is that by ignoring the smallscale fading
the large scale channel gain of the irs aided link for user k
can be approximated by
since xbs  xk is the fixed distance between the bs and user
k p lk in eq 69 obtains the maximum value when xris 
xbs  xk  xris  ie xris  xbs  xk 2 which means
when the ris arrives at the approximate midpoint between the
bs and user k the channel condition becomes the worst and
the sum energy consumption reaches the peak value
sum energy consumption at users j
scheme 1 nomamec
scheme 2 tdmamec
200
200
400
600
800
1000
1200
1400
1600
horizontal ordinate of ris m
fig 7
sum energy consumption versus the horizontal ordinate of the ris
sum energy consumption at users j
sum energy consumption at users j
scheme 1 nomamec n10
scheme 1 nomamec n20
scheme 2 tdmamec n10
scheme 2 tdmamec n20
100
200
300
400
500
600
700
800
longitudinal coordinates of ris m
fig 8 sum energy consumption versus the longitudinal ordinate of the ris
p lk  128  2  376 log10 drb  376 log10 drk 
where drb and drk are the distances between ris and
in fig 8 we plot the sum energy consumption versus the
longitudinal ordinate of the ris with different numbers of the
ris reflecting units besides the locations of users and the
bs are the same as that in fig7 the input computation task
is rk  05 mbits and the maximum latency is t  02
s we assume that the ris moves from 100 m 100 m to
100 m 800 m with the step size of 100 m while keeping
the xcoordinate fixed it is obvious that the sum energy
consumption at users increases with longitudinal ordinate of
the ris and the increasing speed becomes slower for large
longitudinal ordinate of the ris
vi c onclusion
in this paper we considered an risassisted nomamec
network we aimed at minimizing the energy consumption of
all users by jointly optimizing the ris phase shift the number
of transmission data transmission rate power control and
transmission time since the decoding order is not determined
before the transmission process and the problem is nonconvex
due to the ris phase variables we decomposed the problem
into two subproblems for the first subproblem we utilized
the dual method to resolve this problem with given ris phase
vector  and obtained the closedform solution for the other
subproblem with given power control p  the penalty method
is used to obtain a suboptimal solution the block coordinate
descent process continued to alternately solve these two subproblems until the objective value converged furthermore in
order to show the benefits of the proposed risbased nomamec scheme we proposed three benchmark schemes including the tdmamec partial offloading scheme full local
computing scheme and full offloading scheme for the tdmamec partial offloading scheme we proposed an alternating
1d search method which could easily obtain the suboptimal
solution of ris phase shifts numerical results showed that our
proposed nomamec scheme could significantly decrease
the sum energy consumptions of all users and illustrated the
impact of distance on the performance of our proposed system
in practice the csi might have estimation errors and thus
robust tranmission design will be studied in the future work
38 39
r eferences
1 a u r khan m othman s a madani and s u khan a survey
of mobile cloud computing application models ieee communications
surveys tutorials vol 16 no 1 pp 393413 2014
2 h li g shou y hu and z guo mobile edge computing progress
and challenges in 2016 4th ieee international conference on mobile
cloud computing services and engineering mobilecloud 2016 pp
8384
3 m chen n shlezinger h v poor y c eldar and s cui
communicationefficient federated learning proceedings of the national academy of sciences vol 118 no 17 2021
4 x chen l jiao w li and x fu efficient multiuser computation
offloading for mobileedge cloud computing ieeeacm transactions
on networking vol 24 no 5 pp 27952808 2016
5 x cao f wang j xu r zhang and s cui joint computation and
communication cooperation for energyefficient mobile edge computing ieee internet of things journal vol 6 no 3 pp 41884200
2019
6 c huang s hu g c alexandropoulos a zappone c yuen
r zhang m di renzo and m debbah holographic mimo surfaces
for 6g wireless networks opportunities challenges and trends ieee
wireless communications pp 18 2020
7 z yang m chen w saad w xu m shikhbahaei h v poor
and s cui energyefficient wireless communications with distributed
reconfigurable intelligent surfaces 2020
8 z yang m chen kk wong h v poor and s cui federated
learning for 6g applications challenges and opportunities arxiv
preprint arxiv210101338 2021
9 c huang a zappone g c alexandropoulos m debbah and
c yuen reconfigurable intelligent surfaces for energy efficiency in
wireless communication ieee transactions on wireless communications vol 18 no 8 pp 41574170 2019
10 q wu and r zhang intelligent reflecting surface enhanced wireless
network via joint active and passive beamforming ieee transactions
on wireless communications vol 18 no 11 pp 53945409 2019
11 s hong c pan h ren k wang and a nallanathan artificialnoiseaided secure mimo wireless communications via intelligent reflecting
surface ieee transactions on communications vol 68 no 12 pp
78517866 2020
12 l zhang y wang w tao z jia t song and c pan intelligent
reflecting surface aided mimo cognitive radio systems ieee transactions on vehicular technology pp 11 2020
13 z yang w xu c huang j shi and m shikhbahaei beamforming
design for multiuser transmission through reconfigurable intelligent
surface ieee trans commun vol 69 no 1 pp 589601 jan 2021
14 q wu and r zhang towards smart and reconfigurable environment
intelligent reflecting surface aided wireless network ieee communications magazine vol 58 no 1 pp 106112 2020
15 s zhang and r zhang capacity characterization for intelligent reflecting surface aided mimo communication ieee journal on selected
areas in communications vol 38 no 8 pp 18231838 2020
16 c pan h ren k wang m elkashlan a nallanathan j wang and
l hanzo intelligent reflecting surface aided mimo broadcasting for
simultaneous wireless information and power transfer ieee journal
on selected areas in communications vol 38 no 8 pp 17191734
2020
17 c pan h ren k wang w xu m elkashlan a nallanathan
and l hanzo multicell mimo communications relying on intelligent
reflecting surfaces ieee transactions on wireless communications
vol 19 no 8 pp 52185233 2020
18 t bai c pan y deng m elkashlan a nallanathan and l hanzo
latency minimization for intelligent reflecting surface aided mobile
edge computing ieee journal on selected areas in communications
pp 11 2020
19 t bai c pan h ren y deng m elkashlan and a nallanathan
resource allocation for intelligent reflecting surface aided wireless
powered mobile edge computing in ofdm systems arxiv preprint
arxiv200305511 2020
20 z ding x lei g k karagiannidis r schober j yuan and v k
bhargava a survey on nonorthogonal multiple access for 5g networks
research challenges and future trends ieee journal on selected areas
in communications vol 35 no 10 pp 21812195 2017
21 z ding j xu o a dobre and h v poor joint power and time
allocation for nomamec offloading ieee transactions on vehicular
technology vol 68 no 6 pp 62076211 2019
22 f wang j xu and z ding multiantenna noma for computation
offloading in multiuser mobile edge computing systems ieee transactions on communications vol 67 no 3 pp 24502463 2019
23 y ye r q hu g lu and l shi enhance latencyconstrained
computation in mec networks using uplink noma ieee transactions
on communications vol 68 no 4 pp 24092425 2020
24 z ding and h vincent poor a simple design of irsnoma transmission ieee communications letters vol 24 no 5 pp 11191123
2020
25 z zhang l lv q wu h deng and j chen robust and secure communications in intelligent reflecting surface assisted noma networks
ieee communications letters pp 11 2020
26 y li m jiang q zhang and j qin joint beamforming design in
multicluster miso noma reconfigurable intelligent surfaceaided downlink communication networks ieee transactions on communications
pp 11 2020
27 d tse and p viswanath fundamentals of wireless communication
cambridge university press 2005
28 x yuan yj a zhang y shi w yan and h liu reconfigurableintelligentsurface empowered wireless communications challenges and
opportunities arxiv preprint arxiv200100364 2020
29 y li m jiang q zhang and j qin joint beamforming design in
multicluster miso noma reconfigurable intelligent surfaceaided down
link communication networks ieee transactions on communications
pp 11 2020
b zheng and r zhang intelligent reflecting surfaceenhanced ofdm
channel estimation and reflection optimization ieee wireless communications letters vol 9 no 4 pp 518522 2020
z wang l liu and s cui channel estimation for intelligent reflecting surface assisted multiuser communications framework algorithms
and analysis ieee transactions on wireless communications vol 19
no 10 pp 66076620 2020
l wei c huang g c alexandropoulos c yuen z zhang m debbah et al channel estimation for risempowered multiuser miso
wireless communications arxiv preprint arxiv200801459 2020
t bai j wang y ren and l hanzo energyefficient computation
offloading for secure uavedgecomputing systems ieee transactions
on vehicular technology vol 68 no 6 pp 60746087 2019
s boyd and l vandenberghe convex optimization
cambridge
university press 2004
d n c tse and s v hanly multiaccess fading channels i polymatroid structure optimal resource allocation and throughput capacities
ieee transactions on information theory vol 44 no 7 pp 2796
2815 1998
m grant and s boyd cvx matlab software for disciplined convex
programming version 21 httpcvxrcomcvx mar 2014
m chen z yang w saad c yin s cui and h v poor a joint
learning and communications framework for federated learning over
wireless networks ieee trans wireless commun vol 20 no 1 pp
269283 jan 2021
g zhou c pan h ren k wang m d renzo and a nallanathan
robust beamforming design for intelligent reflecting surface aided miso
communication systems ieee wireless communications letters vol 9
no 10 pp 16581662 2020
g zhou c pan h ren k wang and a nallanathan a framework
of robust transmission design for irsaided miso communications with
imperfect cascaded channels ieee transactions on signal processing
vol 68 pp 50925106 2020
